import{j as t}from"./react-24-O7H2m.js";import{e as Xt}from"./@remix-run-nSxv3ELK.js";import{B as Ue,F as Zt,d as ea,D as Ct,A as At,I as Pt,a as ta,T as Ie,b as aa,c as at,e as nt,f as $e,g as st,h as na,i as ge,C as $t,j as sa,k as ra,P as be,l as oa,L as rt,m as Dt,S as ze,n as la,o as ca,p as ia,q as ot,r as lt,s as ua,t as da,u as ma,v as ha,w as Mt,x as pa,y as xa,z as fa,E as ga,G as ja,H as Sa,J as ba,K as ya,M as va,N as _a,O as Ra,Q as Ta,R as Na,U as Ia,V as Oa}from"./@mui-ZQF2x56C.js";import{c as Qe,O as wa,d as Ca,e as me}from"./react-router-AQZaUe--.js";import{u as De,a as Bt,b as ve,c as Aa}from"./ahooks-XUeTMw_U.js";import{N as Pa,H as $a}from"./react-router-dom-9FyeBW54.js";import"./object-assign-xLi3eZUp.js";import"./@emotion-QRY_AlUX.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@popperjs-zyV4rJhQ.js";import"./tslib-g6pQwBLH.js";import"./lodash-JD0k9kaZ.js";function is(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const Da="modulepreload",Ma=function(e,a){return new URL(e,a).href},ct={},Ba=function(a,s,n){let r=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link");r=Promise.all(s.map(l=>{if(l=Ma(l,n),l in ct)return;ct[l]=!0;const u=l.endsWith(".css"),i=u?'[rel="stylesheet"]':"";if(!!n)for(let h=o.length-1;h>=0;h--){const x=o[h];if(x.href===l&&(!u||x.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(l,'"]').concat(i)))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Da,u||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),u)return new Promise((h,x)=>{m.addEventListener("load",h),m.addEventListener("error",()=>x(new Error("Unable to preload CSS for ".concat(l))))})}))}return r.then(()=>a()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},Lt=1e3,M="adminId",D="Authorization",w="orgId",z=axios.defaults,{common:N}=z.headers,La=axios.CancelToken.source(),ka=()=>{localStorage.removeItem(D),Xt(Te(Re.login))};z.baseURL="http://121.196.247.3";z.withCredentials=!1;var gt,jt;(jt=N[D])!=null||(N[D]=(gt=localStorage.getItem(D))!=null?gt:"");var St,bt;(bt=N[M])!=null||(N[M]=(St=localStorage.getItem(M))!=null?St:"");const L=(e,a)=>{var s,n,r,o;try{const l=(s=localStorage.getItem(D))!=null?s:a;return l?String((o=JSON.parse(atob((r=(n=l.split("."))==null?void 0:n[1])!=null?r:"")))==null?void 0:o[e]):""}catch(l){return""}},B="level",K=e=>L(B,e);var yt;(yt=N[B])!=null||(N[B]=K());var vt;(vt=N[w])!=null||(N[w]=L(w));const Ea=new AbortController;z.signal=Ea.signal;z.cancelToken=La.token;const he=window.caches,{adapter:pe}=z,Me=e=>{try{return JSON.stringify(e)}catch(a){return""}},Fa=({url:e,headers:a,params:s,data:n})=>[e,a==null?void 0:a[D],a==null?void 0:a[M],a==null?void 0:a[B],Me(s),Me(n)].join("_");pe&&typeof pe=="function"&&(z.adapter=async e=>{if(!he)return pe(e);const{url:a="",headers:s={},params:n,data:r}=e,o=Fa({url:a,headers:s,params:n,data:r}),l=await(he==null?void 0:he.open(a)),u=await(l==null?void 0:l.match(o));if(u)return await u.json();const i=await pe(e),{status:p,data:m}=i;return p===200&&typeof m=="string"&&m.includes(String(Lt))&&await(l==null?void 0:l.put(o,new Response(Me(i)))),i});axios.interceptors.request.use(async e=>e,e=>Promise.reject(e));axios.interceptors.response.use(async e=>(e.data.code===1003&&ka(),e),async e=>Promise.reject(e));const Ua="_AppBar_z9nlw_1",za="_menuIcon_z9nlw_11",Qa="_Avatar_z9nlw_19",Ha="_open_z9nlw_27",qa="_Popover_z9nlw_39",Va="_DialogActions_z9nlw_49",q={AppBar:Ua,menuIcon:za,Avatar:Qa,open:Ha,Popover:qa,DialogActions:Va};var kt=(e=>(e.SET_TITLE="SET_TITLE",e))(kt||{}),Et=(e=>(e.title="title",e))(Et||{});const Ga={title:""},Ja=(e=Ga,a)=>{const{type:s,payload:n={}}=a;switch(s){case"SET_TITLE":return{...e,...n};default:return e}},Ka=ReactRedux.useSelector,Wa="_root_x6ehs_1",Ya="_Skeleton_x6ehs_4",Xa="_aLink_x6ehs_14",Oe={root:Wa,Skeleton:Ya,aLink:Xa},Za="_AppBar_1f05h_1",en="_menuIcon_1f05h_11",tn="_Avatar_1f05h_19",an="_open_1f05h_27",nn="_Popover_1f05h_39",sn="_DialogActions_1f05h_49",rn="_ToggleButtonGroup_1f05h_60",on="_date_1f05h_69",ln="_AccordionDetails_1f05h_87",cn="_AccordionSummary_1f05h_91",un="_filterResult_1f05h_96",dn="_Breadcrumbs_1f05h_109",mn="_CurrentFilterShow_1f05h_116",A={AppBar:Za,menuIcon:en,Avatar:tn,open:an,Popover:nn,DialogActions:sn,ToggleButtonGroup:rn,date:on,AccordionDetails:ln,AccordionSummary:cn,filterResult:un,Breadcrumbs:dn,CurrentFilterShow:mn};var ye=(e=>(e.SnackbarAlert="SnackbarAlert",e.OPENTRUE="OPENTRUE",e.OPENFALSE="OPENFALSE",e))(ye||{}),re=(e=>(e.alertText="alertText",e.open="open",e.severity="severity",e))(re||{}),Be=(e=>(e.error="error",e.info="info",e.success="success",e.warning="warning",e))(Be||{});const hn={alertText:"",open:!1,severity:"success"},pn=(e=hn,a)=>{const{type:s,payload:n={}}=a,r=o=>({...e,...n,open:o});switch(s){case"OPENFALSE":return r(!1);case"OPENTRUE":return r(!0);default:return e}},xn=ReactRedux.useSelector,W=()=>({[B]:Number(K())||0,orgId:L(w)||"HB",date:Qt(U())}),_e=()=>({...W(),type:"year"}),Le="uuid",xe=(e,a)=>{N[e]=a,localStorage.setItem(e,a)},fn=({adminId:e,password:a,scode:s})=>n=>axios.post("/api/user/login",null,{params:{adminId:e,password:a,scode:s,uuid:sessionStorage.getItem(Le)}}).then(r=>{var i;const{code:o,info:l,data:u}=(i=r.data)!=null?i:{};return r.status===200&&o===Lt?(n({type:ye.OPENTRUE,payload:{[re.alertText]:"登录成功",[re.severity]:Be.success}}),xe(D,"Bearer "+u.jwt),xe(M,e),xe(B,K(String(u.level))),xe(w,L(w,u.orgId)),localStorage.setItem(T,u.orgnization),!0):Promise.reject(l)}).catch(r=>{n({type:ye.OPENTRUE,payload:{[re.alertText]:String(r),[re.severity]:Be.error}})}),gn=()=>axios.get("/api/scode/",{params:{[Le]:(()=>{const e=uuid.v4().replaceAll("-","");return sessionStorage.setItem(Le,e),e})()}}).then(e=>{var a;return(a=e==null?void 0:e.data)==null?void 0:a.data}).catch(console.error),oe=e=>({params:{...W(),...e}}),ke=(e=W())=>axios.get("/api/sale/subregion",oe(e)).then(a=>a.data.data).catch(console.error),Ft=({type:e,...a}=_e())=>axios.get("/api/sale/structure/".concat(e),oe({...a})).then(s=>s.data.data.salesRecordMap).catch(console.error),je=["scRatio","feRatio","jbRatio"],jn={[je[0]]:"顺差让利",[je[1]]:"分期合约",[je[2]]:"金币合约"},Sn=({type:e,...a}=_e())=>axios.get("/api/sale/contract/".concat(e),oe({...a})).then(s=>Object.entries(s.data.data).filter(n=>je.includes(n[0])).map(n=>{var r,o;return{value:(r=n[1])!=null?r:0,name:(o=jn[n[0]])!=null?o:""}})).catch(console.error),Ut=({type:e,...a}=_e())=>axios.get("/api/sale/topPhone/".concat(e),oe({...a})).then(s=>s.data.data.phoneInfoRank).then(s=>Object.keys(s).map((n,r)=>{const o=s[r+1];return o?{...o,index:String(n)}:{phoneType:"",salesNum:0,rate:0,priceLevel:"",index:"0"}})).then(s=>s.filter(n=>!!n.salesNum)).catch(console.error),bn=(e=W())=>axios.get("/api/sale/channel/situation",oe(e)).then(a=>a.data.data).catch(console.error),{fromEntries:fe}=Object,J="-",He=(e=new Date)=>String(e.getDate()).padStart(2,"0"),zt=(e=new Date)=>String(e.getMonth()+1).padStart(2,"0"),U=(e=new Date)=>e.getFullYear()+J+zt(e)+J+He(e),Qt=e=>e.replaceAll(J,"/"),Ht=1e3*60*60*24,it=e=>U(new Date(new Date().getTime()-Ht*e)),qe="month",Ee=new Date().getFullYear(),se=e=>(e+J+zt()+J+He()).slice(0,10),ut=e=>{const a=new Date,s=new Date(e);return a.setUTCMinutes(a.getUTCMinutes()-a.getTimezoneOffset()),s.setUTCMinutes(s.getUTCMinutes()-s.getTimezoneOffset()),Math.floor(Math.abs(s.getTime()-a.getTime())/Ht)},dt=[{label:"year",text:"".concat(Ee,"年")},{label:qe,text:"按月筛选"},{label:"day",text:"按日筛选"}],we=[{label:"year",text:"按年筛选"},{label:qe,text:"按月筛选"},{label:"day",text:"按日筛选"}],Fe=[{text:"市",label:"city_id"},{text:"区县",label:"area_id"},{text:"网格",label:"grid_id"},{text:"营业厅",label:"end_id"}],yn="-1",vn=(e,a)=>[{[T]:"所有".concat(a),regionId:yn},...e.map(s=>{var n;return{...s,[T]:"".concat(s==null?void 0:s[T]).concat(a),regionId:(n=s.regionId)!=null?n:"0"}})],_n="河北省",mt=e=>{var x,_,v;const{address:a,hasDataIndex:s,time:n,f:r=void 0,noNeedTime:o=!1,noNeedAddress:l=!1,unitName:u=[],setBreadcrumbsAddress:i}=e,p=!o&&!l,m=n.split(J),h=localStorage.getItem(T);return t.jsxs(be,{className:(x=A.filterResult)!=null?x:"",elevation:24,children:[p&&t.jsxs(React.StrictMode,{children:[t.jsxs("div",{children:["当前",t.jsx("wbr",{}),"筛选"]}),t.jsx("span",{children:"{"})]}),t.jsxs("div",{children:[t.jsxs("div",{children:["地理位置：",t.jsxs(oa,{className:(_=A.Breadcrumbs)!=null?_:"",children:[s?t.jsx(rt,{onClick:()=>{i(-1)},children:h}):t.jsx("span",{children:h}),u.filter(j=>a[j.label]).map((j,y,S)=>{var f,I;return y===S.length-1?t.jsx("span",{children:(f=a[j.label])==null?void 0:f[T]}):t.jsx(rt,{onClick:()=>{i(y)},children:(I=a[j.label])==null?void 0:I[T]},y)}),s>=0&&t.jsx("span",{children:"所有".concat((v=u[s])==null?void 0:v.text)})]})]}),p&&t.jsx(Dt,{}),!o&&t.jsxs("p",{children:["时间范围：",(()=>{var S,f,I;const j="".concat(m[0],"年"),y="".concat(j+m[1],"月");switch(r==null?void 0:r.label){case((S=dt[0])==null?void 0:S.label):return j;case((f=dt[1])==null?void 0:f.label):return y;default:return"".concat(y).concat((I=m[2])!=null?I:He(),"日")}})()]})]})]})},Ve=React.forwardRef((e,a)=>{var X,Z,ee,te,ae,Je,Ke,We,Ye;const s=Number((X=localStorage.getItem(B))!=null?X:K()),n=s?Fe.slice(s):Fe,{run:r,noNeedTime:o=!1,noNeedAddress:l=!1,timeNeedDay:u=!1}=e,i=u?we:we.slice(0,we.length-1),[p,m]=React.useState((Z=i[0])==null?void 0:Z.label),[h,x]=React.useState(U()),[_,v]=De(fe(n.map(c=>[c.label,null]))),[j,y]=De(fe(n.map(c=>[c.label,[]])));Bt(()=>ReactDOM.unstable_batchedUpdates(()=>{ke({level:s,[w]:L(w)}).then(c=>{var b;const d=(b=n[0])==null?void 0:b.label;c&&d&&y({[d]:c})})}));const S=n.findIndex(c=>!_[c.label]),f=S<0?n.length:S,I=i.find(c=>c.label===p),[k,g]=React.useState(!1),C=React.useCallback(c=>ReactDOM.unstable_batchedUpdates(()=>{v(fe(n.filter((d,b)=>b>c).map(d=>[d.label,null]))),g(!0)}),[]),Q={address:_,hasDataIndex:S,time:h,f:I,noNeedAddress:l,noNeedTime:o,unitName:n,setBreadcrumbsAddress:C},[ce,P]=React.useState(!1),[Y,ie]=React.useState(Q),H=W().orgId;return React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{var c,d;if(k){const b=(c=n[f-1])==null?void 0:c.label,R=b?(d=_[b])==null?void 0:d.regionId:H;r({...!o&&{date:Qt(se(h)),...p&&{type:p}},[w]:R!=null?R:H,level:f+s}),ie(Q),P(!1),g(!1)}}),[k]),React.useImperativeHandle(a,()=>({toDown:c=>ReactDOM.unstable_batchedUpdates(()=>{var E;if(!c)return;const{regionName:d,regionId:b}=c,R=(E=n[S])==null?void 0:E.label;R&&(v({[R]:{regionId:b,regionName:d}}),g(!0))})})),t.jsxs(React.StrictMode,{children:[t.jsxs("div",{className:A.CurrentFilterShow,children:[!l&&t.jsx(Ue,{variant:"contained",size:"large",onClick:P.bind(null,!0),children:"筛选器"}),!!Y.hasDataIndex&&t.jsxs(Zt,{variant:"extended",color:"primary",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{var d;const c=(d=n[f-1])==null?void 0:d.label;c&&(v({[c]:null}),g(!0))}),children:[t.jsx(ea,{}),"返回上级"]}),t.jsx(mt,{...Y})]}),t.jsxs(Ct,{open:ce,fullScreen:!0,children:[t.jsxs(At,{className:(ee=A.AppBar)!=null?ee:"",position:"sticky",children:[t.jsx(Pt,{size:"large",className:(te=A.menuIcon)!=null?te:"",onClick:P.bind(null,!1),children:t.jsx(ta,{})}),t.jsx(Ie,{children:"筛选器"}),t.jsx(Se,{autoFocus:!0,variant:"contained",color:"success",endIcon:t.jsx(aa,{}),onClick:()=>{g(!0)},children:"确定"})]}),t.jsx(mt,{...Q}),!l&&t.jsxs(at,{defaultExpanded:!0,elevation:24,children:[t.jsx(nt,{expandIcon:t.jsx($e,{}),className:(ae=A.AccordionSummary)!=null?ae:"",children:t.jsx(Ie,{children:"地理范围筛选"})}),t.jsx(st,{className:(Je=A.AccordionDetails)!=null?Je:"",children:n.map((c,d)=>{var Ze,et;if(S>=0&&d>S)return t.jsx(t.Fragment,{});const{label:b}=c,R=j[b];if(!R)return t.jsx(t.Fragment,{});const E=vn(R,c.text),Xe=!R.length;return t.jsx(na,{disablePortal:!0,autoSelect:!0,autoComplete:!0,autoFocus:!0,autoHighlight:!0,loading:Xe,options:E,getOptionLabel:$=>{var O;return(O=$==null?void 0:$.regionName)!=null?O:""},isOptionEqualToValue:($,O)=>$.regionId===O.regionId,onChange:($,O)=>ReactDOM.unstable_batchedUpdates(()=>{v(fe(n.filter((ne,de)=>de>=d).map(ne=>[ne.label,null])));const ue=O==null?void 0:O.regionId;v({[b]:O}),d!==n.length-1&&ue&&ke({level:s+d+1,orgId:ue}).then(ne=>{var tt;const de=(tt=n[d+1])==null?void 0:tt.label;ne&&de&&y({[de]:ne})})}),value:(et=(Ze=_[b])!=null?Ze:E[0])!=null?et:null,renderInput:({size:$,InputProps:O,...ue})=>t.jsx(ge,{...$&&{size:$},...ue,InputProps:{...O,endAdornment:t.jsxs(React.StrictMode,{children:[Xe?t.jsx($t,{}):null,O.endAdornment]})},label:"请选择".concat(c.text)}),noOptionsText:"无此选项"},d)})})]}),!o&&t.jsxs(at,{defaultExpanded:!0,elevation:24,children:[t.jsx(nt,{expandIcon:t.jsx($e,{}),className:(Ke=A.AccordionSummary)!=null?Ke:"",children:t.jsx(Ie,{children:"时间范围筛选"})}),t.jsxs(st,{children:[t.jsx(sa,{color:"primary",value:p,exclusive:!0,onChange:(c,d)=>{var b,R;d===((b=i[2])==null?void 0:b.label)&&ut(se(h))>90&&x(U()),d===((R=i[1])==null?void 0:R.label)&&ut(se(h))>30&&x(U()),m(E=>d!=null?d:E)},className:(We=A.ToggleButtonGroup)!=null?We:"",children:i.map((c,d)=>{var b;return t.jsx(ra,{value:(b=c.label)!=null?b:"",children:c.text},d)})}),t.jsxs("label",{className:classNames(A.date),children:["请选择周期：",p===((Ye=i[0])==null?void 0:Ye.label)?t.jsx("select",{onChange:c=>{x(c.target.value)},value:h,children:" ".repeat(2).split("").map((c,d)=>t.jsx("option",{value:String(Ee-d),children:"".concat(Ee-d,"年")},d))}):t.jsx("input",{type:(()=>{var c,d;switch(p){case((c=i[2])==null?void 0:c.label):return"date";case((d=i[1])==null?void 0:d.label):return qe;default:return"hidden"}})(),value:(()=>{var c;switch(p){case((c=i[1])==null?void 0:c.label):return h.slice(0,7);default:return se(h)}})(),onChange:c=>{x(c.target.value)},min:(()=>{var c;switch(p){case((c=i[1])==null?void 0:c.label):return it(90).slice(0,7);default:return se(it(30))}})(),max:(()=>{var c;switch(p){case((c=i[1])==null?void 0:c.label):return U().slice(0,7);default:return U()}})()})]})]})]})]})]})}),T="regionName",ht=" ".repeat(10).split("");function le(e){var I,k;const{columns:a,action:s,noNeedTime:n,noNeedAddress:r,timeNeedDay:o,totalSum:l=!1,...u}=e,[i,p]=React.useState(0),[m,h]=React.useState(10),{data:x=ht,loading:_,run:v}=ve(s,Ne),j=React.useRef(null),y=React.useRef(null),S=_||!x,f=(I=l?x:x==null?void 0:x.slice(i*m,i*m+m))!=null?I:ht;return t.jsx(React.StrictMode,{children:t.jsx(ze,{injectFirst:!0,children:t.jsxs(be,{className:classNames(Oe.root),elevation:24,...u,children:[t.jsx(Ve,{ref:y,run:v,noNeedTime:n,noNeedAddress:r,timeNeedDay:o}),t.jsx(la,{children:t.jsxs(ca,{stickyHeader:!0,children:[t.jsx(ia,{ref:j,children:t.jsx(ot,{children:a.map((g,C)=>t.jsx(lt,{align:"center",children:g.text},C))})}),t.jsx(ua,{children:f.map((g,C)=>{var Q,ce;return t.jsx(ot,{hover:!0,children:S||typeof g=="string"?t.jsx("td",{colSpan:a.length,className:(Q=Oe.Skeleton)!=null?Q:"",style:{"--height":"".concat((ce=j.current)==null?void 0:ce.clientHeight,"px")},children:t.jsx(da,{variant:"rounded",animation:"wave"})}):a.map((P,Y)=>{var X;const ie=P==null?void 0:P.label,H=g==null?void 0:g[ie];return t.jsx(lt,{align:"center",...T===ie&&Y===0&&Number(g.level)!==Fe.length&&{onClick:()=>{var Z,ee,te,ae;(ae=y.current)==null||ae.toDown({regionId:(Z=g.regionId)!=null?Z:W().orgId,[T]:(te=(ee=g[T])!=null?ee:localStorage.getItem(T))!=null?te:_n})},className:(X=Oe.aLink)!=null?X:""},children:P.format&&typeof H=="number"?P.format(H):String(H)},Y)})},C)})})]})}),!l&&t.jsx(ma,{component:"div",count:(k=x==null?void 0:x.length)!=null?k:10,rowsPerPage:m,page:i,onPageChange:(g,C)=>{p(C)},onRowsPerPageChange:g=>ReactDOM.unstable_batchedUpdates(()=>{h(+g.target.value),p(0)}),labelDisplayedRows:g=>{var C;return"".concat(g.from,"-").concat(isNaN(g.to)?1:g.to,"/共").concat((C=g.count)!=null?C:0,"项")},labelRowsPerPage:"每页行数："})]})})})}const Rn="_NavLink_mi57p_1",Tn="_CollapseClick_mi57p_9",Nn="_ArrowDownIcon_mi57p_12",In="_overview_mi57p_16",On="_ListItemButton_mi57p_20",V={NavLink:Rn,CollapseClick:Tn,ArrowDownIcon:Nn,overview:In,ListItemButton:On},qt=({className:e,...a})=>t.jsx(xa,{className:classNames(e,V.ListItemButton),...a}),Vt=e=>{const{text:a="",path:s="",setOpen:n,...r}=e,[o,l]=React.useState(!1),[u,i]=React.useState(!0),p=ReactRedux.useDispatch();return t.jsx(qt,{selected:o,disableGutters:!0,...r,children:t.jsx(Pa,{to:s,className:({isActive:m})=>ReactDOM.unstable_batchedUpdates(()=>(l(m),m&&u&&(n==null||n()),i(!1),V.NavLink)),onClick:()=>{p({type:kt.SET_TITLE,payload:{title:a}})},children:t.jsx(Mt,{primary:a})})})},wn=({item:e})=>{var l,u;const{children:a,id:s,path:n=""}=e,[r,o]=React.useState(!1);return t.jsxs(React.StrictMode,{children:[t.jsxs(qt,{onClick:o.bind(null,!r),className:classNames(V.CollapseClick,{[(l=V.CollapseClickActive)!=null?l:""]:r}),children:[t.jsx(Mt,{primary:s}),t.jsx($e,{className:classNames({[(u=V.ArrowDownIcon)!=null?u:""]:r})})]}),t.jsx(pa,{in:r,children:t.jsx("ul",{children:a==null?void 0:a.map((i,p)=>{var m,h;return t.jsx("li",{children:t.jsx(Vt,{text:(m=i.id)!=null?m:"",path:Te(n,(h=i.path)!=null?h:""),setOpen:o.bind(null,!0)})},p)})})})]})};function Gt(){return t.jsx(React.StrictMode,{children:t.jsx(ze,{injectFirst:!0,children:Wt.map((e,a)=>{var o;const{children:s,id:n="",path:r=""}=e;return t.jsxs(React.StrictMode,{children:[t.jsx(ha,{children:s?t.jsx(wn,{item:e}):t.jsx(Vt,{text:n,path:Te(r),className:(o=V.overview)!=null?o:""})},a),t.jsx(Dt,{})]})})})})}const Se=({...e})=>t.jsx(Ue,{variant:"contained",size:"large",...e}),Cn=()=>{var e,a;return(a=(e=window.caches)==null?void 0:e.keys())==null?void 0:a.then(s=>s.forEach(n=>{var r;return(r=window.caches)==null?void 0:r.delete(n)})).catch(console.error)};function An(e){var h,x,_,v,j,y;const a=Ka(S=>S.AppBarTitle[Et.title]),[s,n]=React.useState(null),[r,o]=React.useState(!1),l=()=>{o(!1)},u=!!s,i=Qe(),[p,m]=React.useState(!1);return t.jsxs(React.StrictMode,{children:[t.jsxs(At,{position:"sticky",className:(h=q.AppBar)!=null?h:"",...e,children:[t.jsx(Pt,{onClick:m.bind(null,!0),className:(x=q.menuIcon)!=null?x:"",size:"large",children:t.jsx(fa,{})}),t.jsx("span",{children:a}),t.jsxs(Ue,{className:classNames(q.Avatar,{[(_=q.open)!=null?_:""]:u}),onClick:S=>{n(S.currentTarget)},children:[t.jsx(ga,{}),t.jsx("span",{children:localStorage.getItem(M)}),t.jsx(ja,{})]})]}),t.jsxs(Sa,{anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:u,onClose:()=>{n(null)},className:(v=q.Popover)!=null?v:"",children:[t.jsxs("p",{children:["用户等级：",t.jsx("span",{children:K()})]}),t.jsxs("p",{children:["用户权限：",t.jsx("span",{children:(j=localStorage.getItem(T))!=null?j:L(w)})]}),t.jsx(Se,{onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{n(null),o(!0)}),startIcon:t.jsx(ba,{}),children:"退出登录"})]}),t.jsxs(Ct,{open:r,keepMounted:!0,onClose:l,children:[t.jsx(ya,{children:"确定要退出登录吗？"}),t.jsxs(va,{className:(y=q.DialogActions)!=null?y:"",children:[t.jsx(Se,{onClick:()=>{Cn(),localStorage.clear(),i(Te(Re.login))},children:"确定"}),t.jsx(Se,{onClick:l,children:"取消"})]})]}),t.jsx(_a,{anchor:"left",open:p,onClose:m.bind(null,!1),children:t.jsx(Gt,{})})]})}function Pn(){const e=Qe();return Bt(()=>{(!localStorage.getItem(D)||!K()||!L(w)||!L(M))&&e(Re.login)}),t.jsxs(React.StrictMode,{children:[t.jsx(An,{}),t.jsx(wa,{})]})}const $n="_loginBody_1iyc9_1",Dn="_input_1iyc9_19",Jt={loginBody:$n,input:Dn};var _t;const Mn={className:(_t=Jt.input)!=null?_t:"",variant:"outlined"};function Bn(){const e=Qe(),a=ReactRedux.useDispatch(),[s,n]=De({adminId:"",password:"",scode:""}),[r,o]=React.useState(!1),{adminId:l,password:u,scode:i}=s,p=/^[A-Z]\d{6}$/.test(l),m=/^\w{6,20}$/.test(u),h=/^\w{5}$/.test(i),x=(f="",I=!0,k="",g="")=>({...Mn,...r?f?I?{}:{error:!0,helperText:g}:{error:!0,helperText:k}:{}});Aa(()=>{o(!1)},[p,m,h]);const[_,v]=React.useState(""),j=()=>gn().then(f=>v(f!=null?f:""));React.useEffect(()=>{j()},[]);const{run:y,loading:S}=ve(()=>fn(s)(a).then(f=>f?e("/"):j()).catch(console.error),{...Ne,manual:!0});return t.jsx(React.StrictMode,{children:t.jsx("div",{className:Jt.loginBody,children:t.jsxs("div",{children:[t.jsx("h3",{children:"移动监控面板"}),t.jsx(ge,{label:"账号",onChange:f=>n({adminId:f.target.value}),...x(l,p,"请输入账号","账号格式不正确"),autoFocus:!0,autocomplete:!0,maxlength:7,pattern:/^\d{7}$/}),t.jsx(ge,{label:"密码",type:"password",onChange:f=>n({password:f.target.value}),...x(u,m,"请输入密码","密码格式不正确"),maxlength:20,autocomplete:!0,pattern:/^\w{6,20}$/}),t.jsx("img",{src:"data:image/jpeg;base64,".concat(_),alt:"No Network",onClick:()=>j()}),t.jsx(ge,{label:"验证码",onChange:f=>n({scode:f.target.value}),...x(i,h,"请输入验证码","验证码格式不正确"),maxlength:5,autocomplete:!0,pattern:/^\w{5}$/}),t.jsx(Ra,{variant:"contained",size:"large",loading:S,onClick:()=>{o(!0),!(!p||!m||!h)&&y()},children:"登录"})]})})})}const Ln="_Paper_p9qzm_1",kn={Paper:Ln};var Rt;const pt={elevation:24,className:(Rt=kn.Paper)!=null?Rt:""};function En(){return t.jsxs(React.StrictMode,{children:[t.jsx(be,{...pt,children:"移动监控面板"}),t.jsx(be,{...pt,children:t.jsx(Gt,{})})]})}function Fn({dom:e,option:a,data:s}){var n;try{const r=(n=echarts.getInstanceByDom(e))!=null?n:echarts.init(e);return r.setOption({animation:!0,animationDuration:1500,animationEasingUpdate:"quinticInOut",tooltip:{},legend:{},...a,series:{type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},labelLine:{show:!0},...a==null?void 0:a.series,data:s}}),r}catch(r){return}}const Un="_echarts_qjzuz_1",zn="_noLoading_qjzuz_6",Qn="_loading_qjzuz_6",Ce={echarts:Un,noLoading:zn,loading:Qn};function Kt(e){const{data:a,loading:s=!1}=e,n=React.useRef(null),{current:r}=n,o=s||!a;return React.useEffect(()=>{setTimeout(()=>{var l;if((r||n.current)&&a)try{Fn({dom:(l=r!=null?r:n.current)!=null?l:document.createElement("div"),data:a})}catch(u){}})},[r,a]),t.jsx("div",{ref:n,className:classNames(Ce.echarts,o?Ce.loading:Ce.noLoading),...r&&{style:{"--offsetTop":"".concat(r==null?void 0:r.offsetTop,"px")}},children:o&&t.jsx($t,{})})}function Hn(){const{data:e,loading:a,run:s}=ve(Sn,{...Ne}),n=React.useRef(null);return t.jsxs(React.StrictMode,{children:[t.jsx(Ve,{ref:n,timeNeedDay:!0,run:s}),t.jsx(Kt,{data:e,loading:a})]})}const qn=[..." ".repeat(5).split("").map((e,a)=>"".concat(a*1e3,"-").concat(a*1e3+1e3,"元")),"5000元以上"];function Vn(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:[{label:"price",text:"机型价位段"},{label:"salesVolume",text:"销量"},{label:"proportion",format:e=>"".concat(e.toLocaleString(),"%"),text:"占比"}],action:e=>Ft(e!=null?e:_e()).then(a=>a&&qn.map(s=>{var n,r,o,l;return{price:s,salesVolume:(r=(n=a[s])==null?void 0:n.salesNum)!=null?r:0,proportion:(l=(o=a[s])==null?void 0:o.ratio)!=null?l:0}})).then(a=>a?[...a,{price:"合计",salesVolume:a.reduce((s,n)=>s+n.salesVolume,0),proportion:100}]:[]),totalSum:!0})})}function Gn(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:[{label:"index",text:"销量排名"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"销量"},{label:"rate",text:"占比",format:e=>"".concat(e.toLocaleString(),"%")},{label:"priceLevel",text:"价格段"}],action:e=>Ut(e).then(a=>a?[...a,{index:"",phoneType:"合计",salesNum:a.filter(s=>!!s).reduce((s,n)=>s+(n==null?void 0:n.salesNum),0),rate:100,priceLevel:""}]:[]),totalSum:!0})})}const xt=e=>"".concat((e*100).toLocaleString(),"%"),Jn=[{label:"channelType",text:"渠道类型"},{label:"channelNums",text:"渠道数量"},{label:"saleChannelsNum",text:"有销渠道数量"},{label:"saleChannelsRatio",format:xt,text:"有销渠道占比"},{label:"validChannelsNum",text:"有效渠道数量"},{label:"validChannelsRatio",text:"有效渠道占比",format:xt}];function Kn(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:Jn,action:bn})})}const Wn=[{label:T,text:"单位"},{label:"daySalesNum",text:"日订货量"},{label:"monthSalesNum",text:"月订货量"},{label:"monthRelativeRate",format:e=>"".concat((e*100).toLocaleString(),"%"),text:"月订货量环比"},{label:"yearSalesNum",text:"年订货量"}];function Yn(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:Wn,action:ke,noNeedAddress:!0,noNeedTime:!0})})}function Xn(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:[{label:"index",text:"库存排序"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"库存数量"},{label:"rate",text:"占比",format:e=>"".concat(e.toLocaleString(),"%")},{label:"priceLevel",text:"价格段"}],action:e=>Ut(e).then(a=>a?[...a,{index:"",phoneType:"合计",salesNum:a.filter(s=>!!s).reduce((s,n)=>s+(n==null?void 0:n.salesNum),0),rate:100,priceLevel:""}]:[]),totalSum:!0})})}function Zn(){const{data:e,loading:a,run:s}=ve(()=>Ft().then(r=>r?Object.entries(r).map(o=>{var l;return{value:(l=o[1].salesNum)!=null?l:0,name:o[0]}}):[]),{...Ne}),n=React.useRef(null);return t.jsxs(React.StrictMode,{children:[t.jsx(Ve,{ref:n,timeNeedDay:!0,run:s}),t.jsx(Kt,{data:e,loading:a})]})}var Re=(e=>(e.login="login",e.auth="auth",e.overview="overview",e.SalesVolumeMonitoring="SalesVolumeMonitoring",e.DistributionOfTerminalSales="DistributionOfTerminalSales",e.TerminalActivitySalesStructure="TerminalActivitySalesStructure",e.SalesStructureOfTerminalPriceRanges="SalesStructureOfTerminalPriceRanges",e.TOP10ModelInformation="TOP10ModelInformation",e.QualityOfTerminalSalesInThePanAlliance="QualityOfTerminalSalesInThePanAlliance",e.SalesSituationOfTerminalSubChannels="SalesSituationOfTerminalSubChannel",e.PurchaseQuantityMonitoring="PurchaseQuantityMonitoring",e.OrderQuantityOfMobileTerminals="OrderQuantityOfMobileTerminals",e.InventoryMonitoring="InventoryMonitoring",e.InventoryQuantity="InventoryQuantity",e.InventoryStructure="InventoryStructure",e))(Re||{});const es=React.lazy(()=>Ba(()=>import("./index-BuvCQRYo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),Wt=[{path:"",id:"目录",element:t.jsx(En,{})},{path:"SalesVolumeMonitoring",id:"终端销量分布",children:[{path:"DistributionOfTerminalSales",id:"终端销量分布",element:t.jsx(React.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(es,{})})},{path:"TerminalActivitySalesStructure",id:"终端活动销售结构",element:t.jsx(Hn,{})},{path:"SalesStructureOfTerminalPriceRanges",id:"终端各价位段销售结构",element:t.jsx(Vn,{})},{path:"TOP10ModelInformation",id:"TOP10机型信息",element:t.jsx(Gn,{})},{path:"SalesSituationOfTerminalSubChannel",id:"终端分渠道销售情况",element:t.jsx(Kn,{})}]},{path:"PurchaseQuantityMonitoring",id:"进货量监控",children:[{path:"OrderQuantityOfMobileTerminals",id:"手机终端订货数量",element:t.jsx(Yn,{})}]},{path:"InventoryMonitoring",id:"库存量监控",children:[{path:"InventoryQuantity",id:"库存TOP10机型",element:t.jsx(Xn,{})},{path:"InventoryStructure",id:"分机型价位段结构",element:t.jsx(Zn,{})}]}],Te=(...e)=>"/".concat(e.join("/"));function ts(){return t.jsxs(Ca,{children:[t.jsx(me,{path:"login",element:t.jsx(Bn,{})}),t.jsx(me,{path:"/",element:t.jsx(Pn,{}),children:Wt.map((e,a)=>{var s,n;return t.jsx(me,{path:(s=e.path)!=null?s:"",element:e.element,children:(n=e.children)==null?void 0:n.map((r,o)=>{var l;return t.jsx(me,{path:(l=r.path)!=null?l:"",element:r.element},o)})},a)})})]})}const as=Redux.combineReducers({SnackBar:pn,AppBarTitle:Ja}),Yt=Redux.legacy_createStore(as,Redux.applyMiddleware(ReduxThunk));Yt.subscribe(()=>{});const ns="_Snackbar_1t4e7_1",ss={Snackbar:ns};function rs(){var o;const{open:e,alertText:a,severity:s}=xn(l=>({open:l.SnackBar.open,alertText:l.SnackBar.alertText,severity:l.SnackBar.severity})),n=ReactRedux.useDispatch(),r=(l,u)=>{u!=="clickaway"&&n({type:ye.OPENFALSE})};return t.jsx(React.StrictMode,{children:t.jsx(Ta,{open:!!(e&&a),autoHideDuration:6e3,onClose:r,message:a,className:(o=ss.Snackbar)!=null?o:"",children:t.jsx(Na,{onClose:r,severity:s,variant:"filled",children:a})})})}const Ne={loadingDelay:300,throttleWait:300};function os(){return t.jsx(React.StrictMode,{children:t.jsx(ze,{injectFirst:!0,children:t.jsxs(Ia,{children:[t.jsx(Oa,{}),t.jsx(ReactRedux.Provider,{store:Yt,children:t.jsxs(React.StrictMode,{children:[t.jsx($a,{children:t.jsx(ts,{})}),t.jsx(rs,{})]})})]})})})}var Tt,Nt;const{location:G,process:Ae,addEventListener:ls}=(Nt=(Tt=window!=null?window:self)!=null?Tt:globalThis)!=null?Nt:void 0;var It,Ot,wt;const Ge=(wt=(Ot=(It=Ae==null?void 0:Ae.env)==null?void 0:It.PUBLIC_URL)!=null?Ot:"./")==null?void 0:wt.replace("/",""),Pe=new URL(Ge,G==null?void 0:G.href),{serviceWorker:F}=navigator,ft="".concat(Ge,"/service-worker.js"),cs=e=>{(Pe==null?void 0:Pe.origin)!==(G==null?void 0:G.origin)||!F||Ge===void 0||ls("load",()=>{fetch(ft,{headers:{"Service-Worker":"script"}}).then(a=>{var n,r;const s=a.headers.get("Content-Type");a.status===404||s&&s!=="application/javascript"||(r=(n=F==null?void 0:F.register(ft))==null?void 0:n.then(o=>{o.onupdatefound=()=>{const{installing:l}=o;l&&(l.onstatechange=()=>{var u,i;(l==null?void 0:l.state)==="installed"&&(F!=null&&F.controller?(u=e==null?void 0:e.onUpdate)==null||u.call(e,o):(i=e==null?void 0:e.onSuccess)==null||i.call(e,o))})}}))==null||r.catch(o=>{})})})};ReactDOM.render(t.jsx(React.StrictMode,{children:t.jsx(os,{})}),document.body);cs();export{le as M,is as __vite_legacy_guard,ke as g,T as r};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-BuvCQRYo.js","./react-24-O7H2m.js","./object-assign-xLi3eZUp.js","./@remix-run-nSxv3ELK.js","./@mui-ZQF2x56C.js","./@emotion-QRY_AlUX.js","./hoist-non-react-statics-o0ngdJFr.js","./@babel-moqvDIRK.js","./stylis-UTZzoVRx.js","./clsx-2Jv0kmJG.js","./@popperjs-zyV4rJhQ.js","./react-router-AQZaUe--.js","./ahooks-XUeTMw_U.js","./tslib-g6pQwBLH.js","./lodash-JD0k9kaZ.js","./react-router-dom-9FyeBW54.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
