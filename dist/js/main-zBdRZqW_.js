import{j as e}from"./react-ejZHSj7z.js";import{e as Tt}from"./@remix-run-gLACTkVu.js";import{B as we,F as It,d as Nt,D as tt,A as nt,I as at,a as wt,T as fe,b as Ot,c as Ee,e as Fe,f as be,g as Ue,h as At,i as se,C as st,j as Ct,k as Pt,P as le,l as $t,L as ze,m as rt,S as Oe,n as Dt,o as Mt,p as kt,q as Ve,r as Qe,s as Bt,t as Lt,u as Et,v as Ft,w as ot,x as Ut,y as zt,z as Vt,E as Qt,G as Ht,H as qt,J as Wt,K as Gt,M as Jt,N as Kt,O as Yt,Q as Xt,R as Zt,U as en,V as tn}from"./@mui-9I-nRog-.js";import{c as Ae,O as nn,d as an,e as ee}from"./react-router-PxHC2DxU.js";import{u as ve,a as lt,b as ie,c as sn}from"./ahooks-3lX5GaIi.js";import{N as rn,H as on}from"./react-router-dom-F7Hajf4b.js";import"./object-assign-4_VUvG2Z.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@popperjs-v-la0Vhf.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const ln="modulepreload",cn=function(t,n){return new URL(t,n).href},He={},un=function(n,a,s){let r=Promise.resolve();if(a&&a.length>0){const o=document.getElementsByTagName("link");r=Promise.all(a.map(l=>{if(l=cn(l,s),l in He)return;He[l]=!0;const d=l.endsWith(".css"),i=d?'[rel="stylesheet"]':"";if(!!s)for(let m=o.length-1;m>=0;m--){const p=o[m];if(p.href===l&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${i}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":ln,d||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),d)return new Promise((m,p)=>{u.addEventListener("load",m),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>n()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},ct=1e3,E="adminId",$="Authorization",T="orgId",D=axios.defaults,{common:G}=D.headers,dn=axios.CancelToken.source(),mn=()=>{localStorage.removeItem($),Tt(me(de.login))};D.baseURL="http://121.196.247.3";D.withCredentials=!1;G[$]??=localStorage.getItem($)??"";G[E]??=localStorage.getItem(E)??"";const w=(t,n)=>{try{const a=localStorage.getItem($)??n;return a?String(JSON.parse(atob(a.split(".")?.[1]??""))?.[t]):""}catch{return""}},U="level",z=t=>w(U,t);G[U]??=z();G[T]??=w(T);const hn=new AbortController;D.signal=hn.signal;D.cancelToken=dn.token;const qe=window.caches,{adapter:te}=D,ye=t=>{try{return JSON.stringify(t)}catch{return""}},pn=({url:t,headers:n,params:a,data:s})=>[t,n?.[$],n?.[E],n?.[U],ye(a),ye(s)].join("_");te&&typeof te=="function"&&(D.adapter=async t=>{if(!qe)return te(t);const{url:n="",headers:a={},params:s,data:r}=t,o=pn({url:n,headers:a,params:s,data:r}),l=await qe?.open(n),d=await l?.match(o);if(d)return await d.json();const i=await te(t),{status:h,data:u}=i;return h===200&&typeof u=="string"&&u.includes(String(ct))&&await l?.put(o,new Response(ye(i))),i});axios.interceptors.request.use(async t=>t,t=>Promise.reject(t));axios.interceptors.response.use(async t=>(t.data.code===1003&&mn(),t),async t=>Promise.reject(t));const fn="_AppBar_z9nlw_1",xn="_menuIcon_z9nlw_11",gn="_Avatar_z9nlw_19",jn="_open_z9nlw_27",Sn="_Popover_z9nlw_39",bn="_DialogActions_z9nlw_49",B={AppBar:fn,menuIcon:xn,Avatar:gn,open:jn,Popover:Sn,DialogActions:bn};var it=(t=>(t.SET_TITLE="SET_TITLE",t))(it||{}),ut=(t=>(t.title="title",t))(ut||{});const vn={title:""},yn=(t=vn,n)=>{const{type:a,payload:s={}}=n;switch(a){case"SET_TITLE":return{...t,...s};default:return t}},_n=ReactRedux.useSelector,Rn="_root_x6ehs_1",Tn="_Skeleton_x6ehs_4",In="_aLink_x6ehs_14",xe={root:Rn,Skeleton:Tn,aLink:In},Nn="_AppBar_1f05h_1",wn="_menuIcon_1f05h_11",On="_Avatar_1f05h_19",An="_open_1f05h_27",Cn="_Popover_1f05h_39",Pn="_DialogActions_1f05h_49",$n="_ToggleButtonGroup_1f05h_60",Dn="_date_1f05h_69",Mn="_AccordionDetails_1f05h_87",kn="_AccordionSummary_1f05h_91",Bn="_filterResult_1f05h_96",Ln="_Breadcrumbs_1f05h_109",En="_CurrentFilterShow_1f05h_116",R={AppBar:Nn,menuIcon:wn,Avatar:On,open:An,Popover:Cn,DialogActions:Pn,ToggleButtonGroup:$n,date:Dn,AccordionDetails:Mn,AccordionSummary:kn,filterResult:Bn,Breadcrumbs:Ln,CurrentFilterShow:En};var ce=(t=>(t.SnackbarAlert="SnackbarAlert",t.OPENTRUE="OPENTRUE",t.OPENFALSE="OPENFALSE",t))(ce||{}),W=(t=>(t.alertText="alertText",t.open="open",t.severity="severity",t))(W||{}),_e=(t=>(t.error="error",t.info="info",t.success="success",t.warning="warning",t))(_e||{});const Fn={alertText:"",open:!1,severity:"success"},Un=(t=Fn,n)=>{const{type:a,payload:s={}}=n,r=o=>({...t,...s,open:o});switch(a){case"OPENFALSE":return r(!1);case"OPENTRUE":return r(!0);default:return t}},zn=ReactRedux.useSelector,V=()=>({[U]:Number(z())||0,orgId:w(T)||"HB",date:pt(P())}),ue=()=>({...V(),type:"year"}),Re="uuid",ne=(t,n)=>{G[t]=n,localStorage.setItem(t,n)},Vn=({adminId:t,password:n,scode:a})=>s=>axios.post("/api/user/login",null,{params:{adminId:t,password:n,scode:a,uuid:sessionStorage.getItem(Re)}}).then(r=>{const{code:o,info:l,data:d}=r.data??{};return r.status===200&&o===ct?(s({type:ce.OPENTRUE,payload:{[W.alertText]:"登录成功",[W.severity]:_e.success}}),ne($,"Bearer "+d.jwt),ne(E,t),ne(U,z(String(d.level))),ne(T,w(T,d.orgId)),localStorage.setItem(S,d.orgnization),!0):Promise.reject(l)}).catch(r=>{s({type:ce.OPENTRUE,payload:{[W.alertText]:String(r),[W.severity]:_e.error}})}),Qn=()=>axios.get("/api/scode/",{params:{[Re]:(()=>{const t=uuid.v4().replaceAll("-","");return sessionStorage.setItem(Re,t),t})()}}).then(t=>t?.data?.data).catch(console.error),J=t=>({params:{...V(),...t}}),Te=(t=V())=>axios.get("/api/sale/subregion",J(t)).then(n=>n.data.data).catch(console.error),dt=({type:t,...n}=ue())=>axios.get(`/api/sale/structure/${t}`,J({...n})).then(a=>a.data.data.salesRecordMap).catch(console.error),re=["scRatio","feRatio","jbRatio"],Hn={[re[0]]:"顺差让利",[re[1]]:"分期合约",[re[2]]:"金币合约"},qn=({type:t,...n}=ue())=>axios.get(`/api/sale/contract/${t}`,J({...n})).then(a=>Object.entries(a.data.data).filter(s=>re.includes(s[0])).map(s=>({value:s[1]??0,name:Hn[s[0]]??""}))).catch(console.error),mt=({type:t,...n}=ue())=>axios.get(`/api/sale/topPhone/${t}`,J({...n})).then(a=>a.data.data.phoneInfoRank).then(a=>Object.keys(a).map((s,r)=>{const o=a[r+1];return o?{...o,index:String(s)}:{phoneType:"",salesNum:0,rate:0,priceLevel:"",index:"0"}})).then(a=>a.filter(s=>!!s.salesNum)).catch(console.error),Wn=(t=V())=>axios.get("/api/sale/channel/situation",J(t)).then(n=>n.data.data).catch(console.error),{fromEntries:ae}=Object,F="-",Ce=(t=new Date)=>String(t.getDate()).padStart(2,"0"),ht=(t=new Date)=>String(t.getMonth()+1).padStart(2,"0"),P=(t=new Date)=>t.getFullYear()+F+ht(t)+F+Ce(t),pt=t=>t.replaceAll(F,"/"),ft=1e3*60*60*24,We=t=>P(new Date(new Date().getTime()-ft*t)),Pe="month",Ie=new Date().getFullYear(),q=t=>(t+F+ht()+F+Ce()).slice(0,10),Ge=t=>{const n=new Date,a=new Date(t);return n.setUTCMinutes(n.getUTCMinutes()-n.getTimezoneOffset()),a.setUTCMinutes(a.getUTCMinutes()-a.getTimezoneOffset()),Math.floor(Math.abs(a.getTime()-n.getTime())/ft)},Je=[{label:"year",text:`${Ie}年`},{label:Pe,text:"按月筛选"},{label:"day",text:"按日筛选"}],ge=[{label:"year",text:"按年筛选"},{label:Pe,text:"按月筛选"},{label:"day",text:"按日筛选"}],Ne=[{text:"市",label:"city_id"},{text:"区县",label:"area_id"},{text:"网格",label:"grid_id"},{text:"营业厅",label:"end_id"}],Gn="-1",Jn=(t,n)=>[{[S]:`所有${n}`,regionId:Gn},...t.map(a=>({...a,[S]:`${a?.[S]}${n}`,regionId:a.regionId??"0"}))],Kn="河北省",Ke=t=>{const{address:n,hasDataIndex:a,time:s,f:r=void 0,noNeedTime:o=!1,noNeedAddress:l=!1,unitName:d=[],setBreadcrumbsAddress:i}=t,h=!o&&!l,u=s.split(F),m=localStorage.getItem(S);return e.jsxs(le,{className:R.filterResult??"",elevation:24,children:[h&&e.jsxs(React.StrictMode,{children:[e.jsxs("div",{children:["当前",e.jsx("wbr",{}),"筛选"]}),e.jsx("span",{children:"{"})]}),e.jsxs("div",{children:[e.jsxs("div",{children:["地理位置：",e.jsxs($t,{className:R.Breadcrumbs??"",children:[a?e.jsx(ze,{onClick:()=>{i(-1)},children:m}):e.jsx("span",{children:m}),d.filter(p=>n[p.label]).map((p,j,b)=>j===b.length-1?e.jsx("span",{children:n[p.label]?.[S]}):e.jsx(ze,{onClick:()=>{i(j)},children:n[p.label]?.[S]},j)),a>=0&&e.jsx("span",{children:`所有${d[a]?.text}`})]})]}),h&&e.jsx(rt,{}),!o&&e.jsxs("p",{children:["时间范围：",(()=>{const p=`${u[0]}年`,j=`${p+u[1]}月`;switch(r?.label){case Je[0]?.label:return p;case Je[1]?.label:return j;default:return`${j}${u[2]??Ce()}日`}})()]})]})]})},$e=React.forwardRef((t,n)=>{const a=Number(localStorage.getItem(U)??z()),s=a?Ne.slice(a):Ne,{run:r,noNeedTime:o=!1,noNeedAddress:l=!1,timeNeedDay:d=!1}=t,i=d?ge:ge.slice(0,ge.length-1),[h,u]=React.useState(i[0]?.label),[m,p]=React.useState(P()),[j,b]=ve(ae(s.map(c=>[c.label,null]))),[N,O]=ve(ae(s.map(c=>[c.label,[]])));lt(()=>ReactDOM.unstable_batchedUpdates(()=>{Te({level:a,[T]:w(T)}).then(c=>{const f=s[0]?.label;c&&f&&O({[f]:c})})}));const y=s.findIndex(c=>!j[c.label]),g=y<0?s.length:y,x=i.find(c=>c.label===h),[_,v]=React.useState(!1),Y=React.useCallback(c=>ReactDOM.unstable_batchedUpdates(()=>{b(ae(s.filter((f,I)=>I>c).map(f=>[f.label,null]))),v(!0)}),[]),M={address:j,hasDataIndex:y,time:m,f:x,noNeedAddress:l,noNeedTime:o,unitName:s,setBreadcrumbsAddress:Y},[Q,pe]=React.useState(!1),[Me,Rt]=React.useState(M),ke=V().orgId;return React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{if(_){const c=s[g-1]?.label,f=c?j[c]?.regionId:ke;r({...!o&&{date:pt(q(m)),...h&&{type:h}},[T]:f??ke,level:g+a}),Rt(M),pe(!1),v(!1)}}),[_]),React.useImperativeHandle(n,()=>({toDown:c=>ReactDOM.unstable_batchedUpdates(()=>{if(!c)return;const{regionName:f,regionId:I}=c,k=s[y]?.label;k&&(b({[k]:{regionId:I,regionName:f}}),v(!0))})})),e.jsxs(React.StrictMode,{children:[e.jsxs("div",{className:R.CurrentFilterShow,children:[!l&&e.jsx(we,{variant:"contained",size:"large",onClick:pe.bind(null,!0),children:"筛选器"}),!!Me.hasDataIndex&&e.jsxs(It,{variant:"extended",color:"primary",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{const c=s[g-1]?.label;c&&(b({[c]:null}),v(!0))}),children:[e.jsx(Nt,{}),"返回上级"]}),e.jsx(Ke,{...Me})]}),e.jsxs(tt,{open:Q,fullScreen:!0,children:[e.jsxs(nt,{className:R.AppBar??"",position:"sticky",children:[e.jsx(at,{size:"large",className:R.menuIcon??"",onClick:pe.bind(null,!1),children:e.jsx(wt,{})}),e.jsx(fe,{children:"筛选器"}),e.jsx(oe,{autoFocus:!0,variant:"contained",color:"success",endIcon:e.jsx(Ot,{}),onClick:()=>{v(!0)},children:"确定"})]}),e.jsx(Ke,{...M}),!l&&e.jsxs(Ee,{defaultExpanded:!0,elevation:24,children:[e.jsx(Fe,{expandIcon:e.jsx(be,{}),className:R.AccordionSummary??"",children:e.jsx(fe,{children:"地理范围筛选"})}),e.jsx(Ue,{className:R.AccordionDetails??"",children:s.map((c,f)=>{if(y>=0&&f>y)return e.jsx(e.Fragment,{});const{label:I}=c,k=N[I];if(!k)return e.jsx(e.Fragment,{});const Be=Jn(k,c.text),Le=!k.length;return e.jsx(At,{disablePortal:!0,autoSelect:!0,autoComplete:!0,autoFocus:!0,autoHighlight:!0,loading:Le,options:Be,getOptionLabel:A=>A?.regionName??"",isOptionEqualToValue:(A,C)=>A.regionId===C.regionId,onChange:(A,C)=>ReactDOM.unstable_batchedUpdates(()=>{b(ae(s.filter((H,Z)=>Z>=f).map(H=>[H.label,null])));const X=C?.regionId;b({[I]:C}),f!==s.length-1&&X&&Te({level:a+f+1,orgId:X}).then(H=>{const Z=s[f+1]?.label;H&&Z&&O({[Z]:H})})}),value:j[I]??Be[0]??null,renderInput:({size:A,InputProps:C,...X})=>e.jsx(se,{...A&&{size:A},...X,InputProps:{...C,endAdornment:e.jsxs(React.StrictMode,{children:[Le?e.jsx(st,{}):null,C.endAdornment]})},label:`请选择${c.text}`}),noOptionsText:"无此选项"},f)})})]}),!o&&e.jsxs(Ee,{defaultExpanded:!0,elevation:24,children:[e.jsx(Fe,{expandIcon:e.jsx(be,{}),className:R.AccordionSummary??"",children:e.jsx(fe,{children:"时间范围筛选"})}),e.jsxs(Ue,{children:[e.jsx(Ct,{color:"primary",value:h,exclusive:!0,onChange:(c,f)=>{f===i[2]?.label&&Ge(q(m))>90&&p(P()),f===i[1]?.label&&Ge(q(m))>30&&p(P()),u(I=>f??I)},className:R.ToggleButtonGroup??"",children:i.map((c,f)=>e.jsx(Pt,{value:c.label??"",children:c.text},f))}),e.jsxs("label",{className:classNames(R.date),children:["请选择周期：",h===i[0]?.label?e.jsx("select",{onChange:c=>{p(c.target.value)},value:m,children:" ".repeat(2).split("").map((c,f)=>e.jsx("option",{value:String(Ie-f),children:`${Ie-f}年`},f))}):e.jsx("input",{type:(()=>{switch(h){case i[2]?.label:return"date";case i[1]?.label:return Pe;default:return"hidden"}})(),value:(()=>{switch(h){case i[1]?.label:return m.slice(0,7);default:return q(m)}})(),onChange:c=>{p(c.target.value)},min:(()=>{switch(h){case i[1]?.label:return We(90).slice(0,7);default:return q(We(30))}})(),max:(()=>{switch(h){case i[1]?.label:return P().slice(0,7);default:return P()}})()})]})]})]})]})]})}),S="regionName",Ye=" ".repeat(10).split("");function K(t){const{columns:n,action:a,noNeedTime:s,noNeedAddress:r,timeNeedDay:o,totalSum:l=!1,...d}=t,[i,h]=React.useState(0),[u,m]=React.useState(10),{data:p=Ye,loading:j,run:b}=ie(a,he),N=React.useRef(null),O=React.useRef(null),y=j||!p,g=(l?p:p?.slice(i*u,i*u+u))??Ye;return e.jsx(React.StrictMode,{children:e.jsx(Oe,{injectFirst:!0,children:e.jsxs(le,{className:classNames(xe.root),elevation:24,...d,children:[e.jsx($e,{ref:O,run:b,noNeedTime:s,noNeedAddress:r,timeNeedDay:o}),e.jsx(Dt,{children:e.jsxs(Mt,{stickyHeader:!0,children:[e.jsx(kt,{ref:N,children:e.jsx(Ve,{children:n.map((x,_)=>e.jsx(Qe,{align:"center",children:x.text},_))})}),e.jsx(Bt,{children:g.map((x,_)=>e.jsx(Ve,{hover:!0,children:y||typeof x=="string"?e.jsx("td",{colSpan:n.length,className:xe.Skeleton??"",style:{"--height":`${N.current?.clientHeight}px`},children:e.jsx(Lt,{variant:"rounded",animation:"wave"})}):n.map((v,Y)=>{const M=v?.label,Q=x?.[M];return e.jsx(Qe,{align:"center",...S===M&&Y===0&&Number(x.level)!==Ne.length&&{onClick:()=>{O.current?.toDown({regionId:x.regionId??V().orgId,[S]:x[S]??localStorage.getItem(S)??Kn})},className:xe.aLink??""},children:v.format&&typeof Q=="number"?v.format(Q):String(Q)},Y)})},_))})]})}),!l&&e.jsx(Et,{component:"div",count:p?.length??10,rowsPerPage:u,page:i,onPageChange:(x,_)=>{h(_)},onRowsPerPageChange:x=>ReactDOM.unstable_batchedUpdates(()=>{m(+x.target.value),h(0)}),labelDisplayedRows:x=>`${x.from}-${isNaN(x.to)?1:x.to}/共${x.count??0}项`,labelRowsPerPage:"每页行数："})]})})})}const Yn="_NavLink_mi57p_1",Xn="_CollapseClick_mi57p_9",Zn="_ArrowDownIcon_mi57p_12",ea="_overview_mi57p_16",ta="_ListItemButton_mi57p_20",L={NavLink:Yn,CollapseClick:Xn,ArrowDownIcon:Zn,overview:ea,ListItemButton:ta},xt=({className:t,...n})=>e.jsx(zt,{className:classNames(t,L.ListItemButton),...n}),gt=t=>{const{text:n="",path:a="",setOpen:s,...r}=t,[o,l]=React.useState(!1),[d,i]=React.useState(!0),h=ReactRedux.useDispatch();return e.jsx(xt,{selected:o,disableGutters:!0,...r,children:e.jsx(rn,{to:a,className:({isActive:u})=>ReactDOM.unstable_batchedUpdates(()=>(l(u),u&&d&&s?.(),i(!1),L.NavLink)),onClick:()=>{h({type:it.SET_TITLE,payload:{title:n}})},children:e.jsx(ot,{primary:n})})})},na=({item:t})=>{const{children:n,id:a,path:s=""}=t,[r,o]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(xt,{onClick:o.bind(null,!r),className:classNames(L.CollapseClick,{[L.CollapseClickActive??""]:r}),children:[e.jsx(ot,{primary:a}),e.jsx(be,{className:classNames({[L.ArrowDownIcon??""]:r})})]}),e.jsx(Ut,{in:r,children:e.jsx("ul",{children:n?.map((l,d)=>e.jsx("li",{children:e.jsx(gt,{text:l.id??"",path:me(s,l.path??""),setOpen:o.bind(null,!0)})},d))})})]})};function jt(){return e.jsx(React.StrictMode,{children:e.jsx(Oe,{injectFirst:!0,children:vt.map((t,n)=>{const{children:a,id:s="",path:r=""}=t;return e.jsxs(React.StrictMode,{children:[e.jsx(Ft,{children:a?e.jsx(na,{item:t}):e.jsx(gt,{text:s,path:me(r),className:L.overview??""})},n),e.jsx(rt,{})]})})})})}const oe=({...t})=>e.jsx(we,{variant:"contained",size:"large",...t}),aa=()=>window.caches?.keys()?.then(t=>t.forEach(n=>window.caches?.delete(n))).catch(console.error);function sa(t){const n=_n(m=>m.AppBarTitle[ut.title]),[a,s]=React.useState(null),[r,o]=React.useState(!1),l=()=>{o(!1)},d=!!a,i=Ae(),[h,u]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(nt,{position:"sticky",className:B.AppBar??"",...t,children:[e.jsx(at,{onClick:u.bind(null,!0),className:B.menuIcon??"",size:"large",children:e.jsx(Vt,{})}),e.jsx("span",{children:n}),e.jsxs(we,{className:classNames(B.Avatar,{[B.open??""]:d}),onClick:m=>{s(m.currentTarget)},children:[e.jsx(Qt,{}),e.jsx("span",{children:localStorage.getItem(E)}),e.jsx(Ht,{})]})]}),e.jsxs(qt,{anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:d,onClose:()=>{s(null)},className:B.Popover??"",children:[e.jsxs("p",{children:["用户等级：",e.jsx("span",{children:z()})]}),e.jsxs("p",{children:["用户权限：",e.jsx("span",{children:localStorage.getItem(S)??w(T)})]}),e.jsx(oe,{onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{s(null),o(!0)}),startIcon:e.jsx(Wt,{}),children:"退出登录"})]}),e.jsxs(tt,{open:r,keepMounted:!0,onClose:l,children:[e.jsx(Gt,{children:"确定要退出登录吗？"}),e.jsxs(Jt,{className:B.DialogActions??"",children:[e.jsx(oe,{onClick:()=>{aa(),localStorage.clear(),i(me(de.login))},children:"确定"}),e.jsx(oe,{onClick:l,children:"取消"})]})]}),e.jsx(Kt,{anchor:"left",open:h,onClose:u.bind(null,!1),children:e.jsx(jt,{})})]})}function ra(){const t=Ae();return lt(()=>{(!localStorage.getItem($)||!z()||!w(T)||!w(E))&&t(de.login)}),e.jsxs(React.StrictMode,{children:[e.jsx(sa,{}),e.jsx(nn,{})]})}const oa="_loginBody_1iyc9_1",la="_input_1iyc9_19",St={loginBody:oa,input:la},ca={className:St.input??"",variant:"outlined"};function ia(){const t=Ae(),n=ReactRedux.useDispatch(),[a,s]=ve({adminId:"",password:"",scode:""}),[r,o]=React.useState(!1),{adminId:l,password:d,scode:i}=a,h=/^[A-Z]\d{6}$/.test(l),u=/^\w{6,20}$/.test(d),m=/^\w{5}$/.test(i),p=(g="",x=!0,_="",v="")=>({...ca,...r?g?x?{}:{error:!0,helperText:v}:{error:!0,helperText:_}:{}});sn(()=>{o(!1)},[h,u,m]);const[j,b]=React.useState(""),N=()=>Qn().then(g=>b(g??""));React.useEffect(()=>{N()},[]);const{run:O,loading:y}=ie(()=>Vn(a)(n).then(g=>g?t("/"):N()).catch(console.error),{...he,manual:!0});return e.jsx(React.StrictMode,{children:e.jsx("div",{className:St.loginBody,children:e.jsxs("div",{children:[e.jsx("h3",{children:"移动监控面板"}),e.jsx(se,{label:"账号",onChange:g=>s({adminId:g.target.value}),...p(l,h,"请输入账号","账号格式不正确"),autoFocus:!0,autocomplete:!0,maxlength:7,pattern:/^\d{7}$/}),e.jsx(se,{label:"密码",type:"password",onChange:g=>s({password:g.target.value}),...p(d,u,"请输入密码","密码格式不正确"),maxlength:20,autocomplete:!0,pattern:/^\w{6,20}$/}),e.jsx("img",{src:`data:image/jpeg;base64,${j}`,alt:"No Network",onClick:()=>N()}),e.jsx(se,{label:"验证码",onChange:g=>s({scode:g.target.value}),...p(i,m,"请输入验证码","验证码格式不正确"),maxlength:5,autocomplete:!0,pattern:/^\w{5}$/}),e.jsx(Yt,{variant:"contained",size:"large",loading:y,onClick:()=>{o(!0),!(!h||!u||!m)&&O()},children:"登录"})]})})})}const ua="_Paper_p9qzm_1",da={Paper:ua},Xe={elevation:24,className:da.Paper??""};function ma(){return e.jsxs(React.StrictMode,{children:[e.jsx(le,{...Xe,children:"移动监控面板"}),e.jsx(le,{...Xe,children:e.jsx(jt,{})})]})}function ha({dom:t,option:n,data:a}){try{const s=echarts.getInstanceByDom(t)??echarts.init(t);return s.setOption({animation:!0,animationDuration:1500,animationEasingUpdate:"quinticInOut",tooltip:{},legend:{},...n,series:{type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},labelLine:{show:!0},...n?.series,data:a}}),s}catch{return}}const pa="_echarts_qjzuz_1",fa="_noLoading_qjzuz_6",xa="_loading_qjzuz_6",je={echarts:pa,noLoading:fa,loading:xa};function bt(t){const{data:n,loading:a=!1}=t,s=React.useRef(null),{current:r}=s,o=a||!n;return React.useEffect(()=>{setTimeout(()=>{if((r||s.current)&&n)try{ha({dom:r??s.current??document.createElement("div"),data:n})}catch{}})},[r,n]),e.jsx("div",{ref:s,className:classNames(je.echarts,o?je.loading:je.noLoading),...r&&{style:{"--offsetTop":`${r?.offsetTop}px`}},children:o&&e.jsx(st,{})})}function ga(){const{data:t,loading:n,run:a}=ie(qn,{...he}),s=React.useRef(null);return e.jsxs(React.StrictMode,{children:[e.jsx($e,{ref:s,timeNeedDay:!0,run:a}),e.jsx(bt,{data:t,loading:n})]})}const ja=[..." ".repeat(5).split("").map((t,n)=>`${n*1e3}-${n*1e3+1e3}元`),"5000元以上"];function Sa(){return e.jsx(React.StrictMode,{children:e.jsx(K,{columns:[{label:"price",text:"机型价位段"},{label:"salesVolume",text:"销量"},{label:"proportion",format:t=>`${t.toLocaleString()}%`,text:"占比"}],action:t=>dt(t??ue()).then(n=>n&&ja.map(a=>({price:a,salesVolume:n[a]?.salesNum??0,proportion:n[a]?.ratio??0}))).then(n=>n?[...n,{price:"合计",salesVolume:n.reduce((a,s)=>a+s.salesVolume,0),proportion:100}]:[]),totalSum:!0})})}function ba(){return e.jsx(React.StrictMode,{children:e.jsx(K,{columns:[{label:"index",text:"销量排名"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"销量"},{label:"rate",text:"占比",format:t=>`${t.toLocaleString()}%`},{label:"priceLevel",text:"价格段"}],action:t=>mt(t).then(n=>n?[...n,{index:"",phoneType:"合计",salesNum:n.filter(a=>!!a).reduce((a,s)=>a+s?.salesNum,0),rate:100,priceLevel:""}]:[]),totalSum:!0})})}const Ze=t=>`${(t*100).toLocaleString()}%`,va=[{label:"channelType",text:"渠道类型"},{label:"channelNums",text:"渠道数量"},{label:"saleChannelsNum",text:"有销渠道数量"},{label:"saleChannelsRatio",format:Ze,text:"有销渠道占比"},{label:"validChannelsNum",text:"有效渠道数量"},{label:"validChannelsRatio",text:"有效渠道占比",format:Ze}];function ya(){return e.jsx(React.StrictMode,{children:e.jsx(K,{columns:va,action:Wn})})}const _a=[{label:S,text:"单位"},{label:"daySalesNum",text:"日订货量"},{label:"monthSalesNum",text:"月订货量"},{label:"monthRelativeRate",format:t=>`${(t*100).toLocaleString()}%`,text:"月订货量环比"},{label:"yearSalesNum",text:"年订货量"}];function Ra(){return e.jsx(React.StrictMode,{children:e.jsx(K,{columns:_a,action:Te,noNeedAddress:!0,noNeedTime:!0})})}function Ta(){return e.jsx(React.StrictMode,{children:e.jsx(K,{columns:[{label:"index",text:"库存排序"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"库存数量"},{label:"rate",text:"占比",format:t=>`${t.toLocaleString()}%`},{label:"priceLevel",text:"价格段"}],action:t=>mt(t).then(n=>n?[...n,{index:"",phoneType:"合计",salesNum:n.filter(a=>!!a).reduce((a,s)=>a+s?.salesNum,0),rate:100,priceLevel:""}]:[]),totalSum:!0})})}function Ia(){const{data:t,loading:n,run:a}=ie(()=>dt().then(r=>r?Object.entries(r).map(o=>({value:o[1].salesNum??0,name:o[0]})):[]),{...he}),s=React.useRef(null);return e.jsxs(React.StrictMode,{children:[e.jsx($e,{ref:s,timeNeedDay:!0,run:a}),e.jsx(bt,{data:t,loading:n})]})}var de=(t=>(t.login="login",t.auth="auth",t.overview="overview",t.SalesVolumeMonitoring="SalesVolumeMonitoring",t.DistributionOfTerminalSales="DistributionOfTerminalSales",t.TerminalActivitySalesStructure="TerminalActivitySalesStructure",t.SalesStructureOfTerminalPriceRanges="SalesStructureOfTerminalPriceRanges",t.TOP10ModelInformation="TOP10ModelInformation",t.QualityOfTerminalSalesInThePanAlliance="QualityOfTerminalSalesInThePanAlliance",t.SalesSituationOfTerminalSubChannels="SalesSituationOfTerminalSubChannel",t.PurchaseQuantityMonitoring="PurchaseQuantityMonitoring",t.OrderQuantityOfMobileTerminals="OrderQuantityOfMobileTerminals",t.InventoryMonitoring="InventoryMonitoring",t.InventoryQuantity="InventoryQuantity",t.InventoryStructure="InventoryStructure",t))(de||{});const Na=React.lazy(()=>un(()=>import("./index-N-VbB78A.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),vt=[{path:"",id:"目录",element:e.jsx(ma,{})},{path:"SalesVolumeMonitoring",id:"终端销量分布",children:[{path:"DistributionOfTerminalSales",id:"终端销量分布",element:e.jsx(React.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(Na,{})})},{path:"TerminalActivitySalesStructure",id:"终端活动销售结构",element:e.jsx(ga,{})},{path:"SalesStructureOfTerminalPriceRanges",id:"终端各价位段销售结构",element:e.jsx(Sa,{})},{path:"TOP10ModelInformation",id:"TOP10机型信息",element:e.jsx(ba,{})},{path:"SalesSituationOfTerminalSubChannel",id:"终端分渠道销售情况",element:e.jsx(ya,{})}]},{path:"PurchaseQuantityMonitoring",id:"进货量监控",children:[{path:"OrderQuantityOfMobileTerminals",id:"手机终端订货数量",element:e.jsx(Ra,{})}]},{path:"InventoryMonitoring",id:"库存量监控",children:[{path:"InventoryQuantity",id:"库存TOP10机型",element:e.jsx(Ta,{})},{path:"InventoryStructure",id:"分机型价位段结构",element:e.jsx(Ia,{})}]}],me=(...t)=>`/${t.join("/")}`;function wa(){return e.jsxs(an,{children:[e.jsx(ee,{path:"login",element:e.jsx(ia,{})}),e.jsx(ee,{path:"/",element:e.jsx(ra,{}),children:vt.map((t,n)=>e.jsx(ee,{path:t.path??"",element:t.element,children:t.children?.map((a,s)=>e.jsx(ee,{path:a.path??"",element:a.element},s))},n))})]})}const Oa=Redux.combineReducers({SnackBar:Un,AppBarTitle:yn}),yt=Redux.legacy_createStore(Oa,Redux.applyMiddleware(ReduxThunk));yt.subscribe(()=>{});const Aa="_Snackbar_1t4e7_1",Ca={Snackbar:Aa};function Pa(){const{open:t,alertText:n,severity:a}=zn(o=>({open:o.SnackBar.open,alertText:o.SnackBar.alertText,severity:o.SnackBar.severity})),s=ReactRedux.useDispatch(),r=(o,l)=>{l!=="clickaway"&&s({type:ce.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(Xt,{open:!!(t&&n),autoHideDuration:6e3,onClose:r,message:n,className:Ca.Snackbar??"",children:e.jsx(Zt,{onClose:r,severity:a,variant:"filled",children:n})})})}const he={loadingDelay:300,throttleWait:300};function $a(){return e.jsx(React.StrictMode,{children:e.jsx(Oe,{injectFirst:!0,children:e.jsxs(en,{children:[e.jsx(tn,{}),e.jsx(ReactRedux.Provider,{store:yt,children:e.jsxs(React.StrictMode,{children:[e.jsx(on,{children:e.jsx(wa,{})}),e.jsx(Pa,{})]})})]})})})}const{location:_t,process:Da,addEventListener:Ma}=window??self??globalThis??void 0,De=(Da?.env?.PUBLIC_URL??"./")?.replace("/",""),ka=new URL(De,_t?.href),{serviceWorker:Se}=navigator,et=`${De}/service-worker.js`,Ba=t=>{ka?.origin!==_t?.origin||!Se||De===void 0||Ma("load",()=>{fetch(et,{headers:{"Service-Worker":"script"}}).then(n=>{const a=n.headers.get("Content-Type");n.status===404||a&&a!=="application/javascript"||Se?.register(et)?.then(s=>{s.onupdatefound=()=>{const{installing:r}=s;r&&(r.onstatechange=()=>{r?.state==="installed"&&(Se?.controller?t?.onUpdate?.(s):t?.onSuccess?.(s))})}})?.catch(s=>{})})})};ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx($a,{})}),document.body);Ba();export{K as M,Te as g,S as r};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-N-VbB78A.js","./react-ejZHSj7z.js","./object-assign-4_VUvG2Z.js","./@remix-run-gLACTkVu.js","./@mui-9I-nRog-.js","./@emotion-tNa4IMmz.js","./hoist-non-react-statics-o0ngdJFr.js","./@babel-moqvDIRK.js","./stylis-UTZzoVRx.js","./clsx-2Jv0kmJG.js","./@popperjs-v-la0Vhf.js","./react-router-PxHC2DxU.js","./ahooks-3lX5GaIi.js","./tslib-g6pQwBLH.js","./lodash-liWoq_f8.js","./react-router-dom-F7Hajf4b.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
