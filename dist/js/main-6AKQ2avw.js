import{j as e}from"./react-ejZHSj7z.js";import{u as Se,a as de,b as je,c as pt}from"./ahooks-bNACcRMN.js";import{A as We,I as qe,d as ht,B as be,a as xt,b as gt,P as ft,c as St,D as Ge,e as jt,f as bt,S as ve,g as Je,T as vt,h as yt,i as _t,j as Ce,k as Me,l as Rt,m as Tt,n as kt,F as It,o as Nt,p as wt,q as le,r as At,s as Pe,t as $e,u as me,v as Le,w as Ot,x as Z,C as Ke,y as Ct,z as Mt,E as Ye,G as Pt,L as Be,H as ye,J as $t,K as Lt,M as Xe,N as Bt,O as Dt,Q as Et,R as Ft,U as Ut,V as Vt,W as zt,X as Qt,Y as Ht,Z as Wt}from"./@mui-6FW4yal6.js";import{c as _e,O as Ze,d as qt,e as J}from"./react-router-GnPFSUwy.js";import{N as Gt,H as Jt}from"./react-router-dom-kzRaAek2.js";import"./object-assign-4_VUvG2Z.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";import"./@babel-moqvDIRK.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@popperjs-v-la0Vhf.js";import"./@remix-run-Tfa50bkj.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const Kt="modulepreload",Yt=function(t,n){return new URL(t,n).href},De={},Xt=function(n,s,a){let r=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link");r=Promise.all(s.map(l=>{if(l=Yt(l,a),l in De)return;De[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!a)for(let m=o.length-1;m>=0;m--){const x=o[m];if(x.href===l&&(!c||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":Kt,c||(p.as="script",p.crossOrigin=""),p.href=l,document.head.appendChild(p),c)return new Promise((m,x)=>{p.addEventListener("load",m),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>n()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},Zt="_AppBar_m54ki_1",en="_menuIcon_m54ki_11",tn="_Avatar_m54ki_19",nn="_open_m54ki_27",an="_Popover_m54ki_39",sn="_DialogActions_m54ki_49",rn="_ToggleButtonGroup_m54ki_60",on="_date_m54ki_69",ln="_AccordionDetails_m54ki_86",cn="_AccordionSummary_m54ki_90",un="_filterResult_m54ki_95",dn="_Breadcrumbs_m54ki_108",mn="_CurrentFilterShow_m54ki_115",b={AppBar:Zt,menuIcon:en,Avatar:tn,open:nn,Popover:an,DialogActions:sn,ToggleButtonGroup:rn,date:on,AccordionDetails:ln,AccordionSummary:cn,filterResult:un,Breadcrumbs:dn,CurrentFilterShow:mn},pn="_AppBar_z9nlw_1",hn="_menuIcon_z9nlw_11",xn="_Avatar_z9nlw_19",gn="_open_z9nlw_27",fn="_Popover_z9nlw_39",Sn="_DialogActions_z9nlw_49",M={AppBar:pn,menuIcon:hn,Avatar:xn,open:gn,Popover:fn,DialogActions:Sn};var et=(t=>(t.SET_TITLE="SET_TITLE",t))(et||{}),tt=(t=>(t.title="title",t))(tt||{});const jn={title:""},bn=(t=jn,n)=>{const{type:s,payload:a={}}=n;switch(s){case"SET_TITLE":return{...t,...a};default:return t}},vn=ReactRedux.useSelector,Re=1e3,F="adminId",U="Authorization",$="orgId",w=axios.defaults,{common:V}=w.headers,yn=axios.CancelToken.source();w.baseURL="http://121.196.247.3";w.withCredentials=!1;V[U]??=localStorage.getItem(U)??"";V[F]??=localStorage.getItem(F)??"";const z=(t,n)=>{try{const s=localStorage.getItem(U)??n;return s?String(JSON.parse(atob(s.split(".")?.[1]??""))?.[t]):""}catch{return""}},B="level",Q=t=>z(B,t);V[B]??=Q();V[$]??=z($);const _n=new AbortController;w.signal=_n.signal;w.cancelToken=yn.token;const Ee=window.caches,{adapter:K}=w,pe=t=>{try{return JSON.stringify(t)}catch{return""}},Rn=({url:t,headers:n,params:s,data:a})=>[t,n?.[U],n?.[F],n?.[B],pe(s),pe(a)].join("_");K&&typeof K=="function"&&(w.adapter=async t=>{if(!Ee)return K(t);const{url:n="",headers:s={},params:a,data:r}=t,o=Rn({url:n,headers:s,params:a,data:r}),l=await Ee?.open(n),c=await l?.match(o);if(c)return await c.json();const d=await K(t),{status:i,data:p}=d;return i===200&&typeof p=="string"&&p.includes(String(Re))&&await l?.put(o,new Response(pe(d))),d});axios.interceptors.request.use(async t=>t,t=>Promise.reject(t));axios.interceptors.response.use(async t=>t,async t=>Promise.reject(t));const ee=({...t})=>e.jsx(be,{variant:"contained",size:"large",...t}),Tn=()=>window.caches?.keys()?.then(t=>t.forEach(n=>window.caches?.delete(n))).catch(console.error);function kn(t){const{menuOpenTrue:n,...s}=t,a=vn(m=>m.AppBarTitle[tt.title]),[r,o]=React.useState(null),[l,c]=React.useState(!1),d=()=>{c(!1)},i=!!r,p=_e();return e.jsxs(React.StrictMode,{children:[e.jsxs(We,{position:"sticky",className:M.AppBar??"",...s,children:[e.jsx(qe,{onClick:n,className:M.menuIcon??"",size:"large",children:e.jsx(ht,{})}),e.jsx("span",{children:a}),e.jsxs(be,{className:classNames(M.Avatar,{[M.open??""]:i}),onClick:m=>{o(m.currentTarget)},children:[e.jsx(xt,{}),e.jsx("span",{children:localStorage.getItem(F)}),e.jsx(gt,{})]})]}),e.jsxs(ft,{anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:i,onClose:()=>{o(null)},className:M.Popover??"",children:[e.jsxs("p",{children:["用户等级：",e.jsx("span",{children:Q()})]}),e.jsx(ee,{onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{o(null),c(!0)}),startIcon:e.jsx(St,{}),children:"退出登录"})]}),e.jsxs(Ge,{open:l,keepMounted:!0,onClose:d,children:[e.jsx(jt,{children:"确定要退出登录吗？"}),e.jsxs(bt,{className:M.DialogActions??"",children:[e.jsx(ee,{onClick:()=>{Tn(),localStorage.clear(),p(ke(ct.login))},children:"确定"}),e.jsx(ee,{onClick:d,children:"取消"})]})]})]})}const In="_root_x6ehs_1",Nn="_Skeleton_x6ehs_4",wn="_aLink_x6ehs_14",ce={root:In,Skeleton:Nn,aLink:wn},N="regionName";function Te(t){const{columns:n,action:s,noNeedTime:a,noNeedAddress:r}=t,[o,l]=React.useState(0),[c,d]=React.useState(10),{data:i=[],loading:p,run:m}=Se(s,Ie),x=React.useRef(null),R=React.useRef(null),A=p||!i;return e.jsx(React.StrictMode,{children:e.jsx(ve,{injectFirst:!0,children:e.jsxs(Je,{className:classNames(ce.root),elevation:24,children:[e.jsx(st,{ref:R,run:m,noNeedTime:a,noNeedAddress:r}),e.jsx(vt,{children:e.jsxs(yt,{stickyHeader:!0,children:[e.jsx(_t,{ref:x,children:e.jsx(Ce,{children:n.map((h,v)=>e.jsx(Me,{align:"center",children:h.text},v))})}),e.jsx(Rt,{children:(i??" ".repeat(9).split(" "))?.slice(o*c,o*c+c).map((h,v)=>e.jsx(Ce,{hover:!0,children:A?e.jsx("td",{colSpan:n.length,className:ce.Skeleton??"",style:{"--height":`${x.current?.clientHeight}px`},children:e.jsx(Tt,{variant:"rounded",animation:"wave"})}):n.map((T,f)=>{const O=T?.label,y=h?.[O];return e.jsx(Me,{align:"center",...N===O&&f===0&&Number(h.level)!==ne.length-1&&{onClick:()=>{R.current?.toDown({regionId:"0",[N]:"A市"})},className:ce.aLink??""},children:T.format&&typeof y=="number"?T.format(y):String(y)},f)})},v))})]})}),e.jsx(kt,{component:"div",count:i?.length??10,rowsPerPage:c,page:o,onPageChange:(h,v)=>{l(v)},onRowsPerPageChange:h=>ReactDOM.unstable_batchedUpdates(()=>{d(+h.target.value),l(0)}),labelDisplayedRows:h=>`${h.from}-${isNaN(h.to)?1:h.to}/共${h.count??0}项`,labelRowsPerPage:"每页行数："})]})})})}const{fromEntries:Y}=Object,L="-",te=(t=new Date)=>t.getFullYear()+L+String(t.getMonth()+1).padStart(2,"0")+L+String(t.getDate()).padStart(2,"0"),he=t=>t.replaceAll(L,"/"),nt="month",at=new Date().getFullYear(),Fe=t=>`${t}-01`.slice(0,10),j=[{label:"year",text:`${at}年`},{label:nt,text:"按月筛选"},{label:"day",text:"按日筛选"}],ne=[{text:"市",label:"city_id"},{text:"区县",label:"area_id"},{text:"网格",label:"grid_id"},{text:"营业厅",label:"end_id"}],An="-1",On=(t,n)=>[{[N]:`所有${n}`,regionId:An},...t.map(s=>({...s,[N]:`${s?.[N]}${n}`,regionId:s.regionId??"0"}))],Ue="河北省",Ve=t=>{const{address:n,hasDataIndex:s,time:a,f:r=void 0,noNeedTime:o=!1,noNeedAddress:l=!1,unitName:c=[],setBreadcrumbsAddress:d}=t,i=!o&&!l,p=a.split(L);return e.jsxs(Je,{className:b.filterResult??"",elevation:24,children:[i&&e.jsxs(React.StrictMode,{children:[e.jsxs("div",{children:["当前",e.jsx("wbr",{}),"筛选"]}),e.jsx("span",{children:"{"})]}),e.jsxs("div",{children:[e.jsxs("div",{children:["地理位置：",e.jsxs(Pt,{className:b.Breadcrumbs??"",children:[s?e.jsx(Be,{onClick:()=>{d(-1)},children:Ue}):e.jsx("span",{children:Ue}),c.filter(m=>n[m.label]).map((m,x,R)=>x===R.length-1?e.jsx("span",{children:n[m.label]?.[N]}):e.jsx(Be,{onClick:()=>{d(x)},children:n[m.label]?.[N]},x)),s>=0&&e.jsx("span",{children:`所有${c[s]?.text}`})]})]}),i&&e.jsx(ye,{}),!o&&e.jsxs("p",{children:["时间范围：",(()=>{const m=`${p[0]}年${p[1]}月`;switch(r?.label){case j[0]?.label:return r.text;case j[1]?.label:return m;default:return`${m}${p[2]??"01"}日`}})()]})]})]})},st=React.forwardRef((t,n)=>{const s=Number(localStorage.getItem(B)??Q()),a=s?ne.slice(s):ne,{run:r,noNeedTime:o=!1,noNeedAddress:l=!1}=t,[c,d]=React.useState(j[0]?.label),[i,p]=React.useState(te()),[m,x]=de(Y(a.map(u=>[u.label,null]))),[R,A]=de(Y(a.map(u=>[u.label,[]])));je(()=>ReactDOM.unstable_batchedUpdates(()=>{ze({level:s,orgId:z($)}).then(u=>{const g=a[0]?.label;u&&g&&A({[g]:u})})}));const h=a.findIndex(u=>!m[u.label]),v=j.find(u=>u.label===c),[T,f]=React.useState(!1),O=React.useCallback(u=>ReactDOM.unstable_batchedUpdates(()=>{x(Y(a.filter((g,_)=>_>u).map(g=>[g.label,null]))),f(!0)}),[]),y={address:m,hasDataIndex:h,time:i,f:v,noNeedAddress:l,noNeedTime:o,unitName:a,setBreadcrumbsAddress:O},[re,oe]=React.useState(!1),[we,mt]=React.useState(y);return React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{T&&(r({...!o&&{date:c===j[0]?.label?he(`${at+L}01${L}01`):he(Fe(i)),...c&&{type:c}},orgId:[H().orgId,...a.filter(u=>m[u.label]).map(u=>m[u.label]?.regionId)].join("."),level:h<0?ne.length-1:h}),mt(y),oe(!1),f(!1))}),[T]),React.useImperativeHandle(n,()=>({toDown:u=>ReactDOM.unstable_batchedUpdates(()=>{if(!u)return;const{regionName:g,regionId:_}=u,C=a[h]?.label;C&&(x({[C]:{regionId:_,regionName:g}}),f(!0))})})),e.jsxs(React.StrictMode,{children:[e.jsxs("div",{className:b.CurrentFilterShow,children:[!l&&e.jsx(be,{variant:"contained",size:"large",onClick:oe.bind(null,!0),children:"筛选器"}),!!we.hasDataIndex&&e.jsxs(It,{variant:"extended",color:"primary",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{const u=h>-1?h-1:a.length-1,g=a[u]?.label;g&&(x({[g]:null}),f(!0))}),children:[e.jsx(Nt,{}),"返回上级"]}),e.jsx(Ve,{...we})]}),e.jsxs(Ge,{open:re,fullScreen:!0,children:[e.jsxs(We,{className:b.AppBar??"",position:"sticky",children:[e.jsx(qe,{size:"large",className:b.menuIcon??"",onClick:oe.bind(null,!1),children:e.jsx(wt,{})}),e.jsx(le,{children:"筛选器"}),e.jsx(ee,{autoFocus:!0,variant:"contained",color:"success",endIcon:e.jsx(At,{}),onClick:()=>{f(!0)},children:"确定"})]}),e.jsx(Ve,{...y}),!l&&e.jsxs(Pe,{defaultExpanded:!0,elevation:24,children:[e.jsx($e,{expandIcon:e.jsx(me,{}),className:b.AccordionSummary??"",children:e.jsx(le,{children:"地理范围筛选"})}),e.jsx(Le,{className:b.AccordionDetails??"",children:a.map((u,g)=>{if(h>=0&&g>h)return e.jsx(e.Fragment,{});const{label:_}=u,C=R[_];if(!C)return e.jsx(e.Fragment,{});const Ae=On(C,u.text),Oe=!C.length;return e.jsx(Ot,{disablePortal:!0,autoSelect:!0,autoComplete:!0,autoFocus:!0,autoHighlight:!0,loading:Oe,options:Ae,getOptionLabel:k=>k?.regionName??"",isOptionEqualToValue:(k,I)=>k.regionId===I.regionId,onChange:(k,I)=>ReactDOM.unstable_batchedUpdates(()=>{x(Y(a.filter((D,G)=>G>=g).map(D=>[D.label,null])));const q=I?.regionId;x({[_]:I}),g!==a.length-1&&q&&ze({level:s+g+1,orgId:q}).then(D=>{const G=a[g+1]?.label;D&&G&&A({[G]:D})})}),value:m[_]??Ae[0]??null,renderInput:({size:k,InputProps:I,...q})=>e.jsx(Z,{...k&&{size:k},...q,InputProps:{...I,endAdornment:e.jsxs(React.StrictMode,{children:[Oe?e.jsx(Ke,{}):null,I.endAdornment]})},label:`请选择${u.text}`}),noOptionsText:"无此选项"},g)})})]}),!o&&e.jsxs(Pe,{defaultExpanded:!0,elevation:24,children:[e.jsx($e,{expandIcon:e.jsx(me,{}),className:b.AccordionSummary??"",children:e.jsx(le,{children:"时间范围筛选"})}),e.jsxs(Le,{children:[e.jsx(Ct,{color:"primary",value:c,exclusive:!0,onChange:(u,g)=>{d(_=>g??_)},className:b.ToggleButtonGroup??"",children:j.map((u,g)=>e.jsx(Mt,{value:u.label??"",children:u.text},g))}),e.jsx(Ye,{in:c!==j[0]?.label,children:e.jsxs("label",{className:classNames(b.date),children:["请选择周期：",e.jsx("input",{type:(()=>{switch(c){case j[2]?.label:return"date";case j[1]?.label:return nt;default:return"hidden"}})(),value:(()=>{switch(c){case j[1]?.label:return i.slice(0,7);default:return Fe(i)}})(),onChange:u=>{p(u.target.value)},max:(()=>{switch(c){case j[1]?.label:return te().slice(0,7);default:return te()}})()})]})})]})]})]})]})}),Cn=[..." ".repeat(4).split(" ").map((t,n)=>`${n*1e3}-${n*1e3+1e3}元`),"5000元以上"];function Mn(){return e.jsx(React.StrictMode,{children:e.jsx(Te,{columns:[{label:"price",text:"机型价位段"},{label:"salesVolume",text:"销量"},{label:"proportion",format:t=>`${t.toLocaleString()}%`,text:"占比"}],action:t=>En(t??se()).then(n=>n?[...n,{price:"合计",salesVolume:n.reduce((s,a)=>s+a.salesVolume,0),proportion:100}]:[])})})}var ae=(t=>(t.SnackbarAlert="SnackbarAlert",t.OPENTRUE="OPENTRUE",t.OPENFALSE="OPENFALSE",t))(ae||{}),E=(t=>(t.alertText="alertText",t.open="open",t.severity="severity",t))(E||{}),xe=(t=>(t.error="error",t.info="info",t.success="success",t.warning="warning",t))(xe||{});const Pn={alertText:"",open:!1,severity:"success"},$n=(t=Pn,n)=>{const{type:s,payload:a={}}=n,r=o=>({...t,...a,open:o});switch(s){case"OPENFALSE":return r(!1);case"OPENTRUE":return r(!0);default:return t}},Ln=ReactRedux.useSelector,H=()=>({[B]:Number(Q())||0,orgId:z($)||"HB",date:he(te())}),se=()=>({...H(),type:"day"}),ge="uuid",X=(t,n)=>{V[t]=n,localStorage.setItem(t,n)},Bn=({adminId:t,password:n,scode:s})=>a=>axios.post("/api/user/login",null,{params:{adminId:t,password:n,scode:s,uuid:sessionStorage.getItem(ge)}}).then(r=>{const{code:o,info:l,data:c}=r.data??{};return r.status===200&&o===Re?(a({type:ae.OPENTRUE,payload:{[E.alertText]:"登录成功",[E.severity]:xe.success}}),X(U,c),X(F,t),X(B,Q(c)),X($,z($,c)),!0):Promise.reject(l)}).catch(r=>{a({type:ae.OPENTRUE,payload:{[E.alertText]:String(r),[E.severity]:xe.error}})}),Dn=()=>axios.get("/api/scode/",{params:{[ge]:(()=>{const t=uuid.v4().replaceAll("-","");return sessionStorage.setItem(ge,t),t})()}}).then(t=>t?.data?.data).catch(console.error),W=t=>({params:{...H(),...t}}),ze=(t=H())=>axios.get("/api/sale/subregion",W(t)).then(n=>n.data.data).catch(console.error),En=({type:t,...n}=se())=>axios.get("/api/sale/structure",W({...n})).then(s=>s.data.data.salesRecordMap).then(s=>Cn.map(a=>({price:a,salesVolume:s[a]?.salesNum??0,proportion:s[a]?.ratio??0}))).catch(console.error),Fn=()=>axios.get("/api/sell").then(t=>t.data.code===Re).catch(console.error),Un=({type:t,...n}=se())=>axios.get(`/api/sale/contract/${t}`,W({...n})).then(s=>Object.entries(s.data.data).map(a=>({value:a[1],name:a[0]}))).catch(console.error),Vn=({type:t,...n}=se())=>axios.get(`/api/sale/topPhone/${t}`,W({...n})).then(s=>s.data.data.phoneInfoRank).then(s=>Object.keys(s).map((a,r)=>{const o=s[r+1];return o?{...o,index:String(a)}:{phoneType:"",salesNum:0,rate:0,priceLevel:"",index:"0"}})).then(s=>s.filter(a=>!!a.salesNum)).catch(console.error),zn=(t=H())=>axios.get("/api/sale/channel/situation",W(t)).then(n=>n.data.data).catch(console.error),Qn="_NavLink_mi57p_1",Hn="_CollapseClick_mi57p_9",Wn="_ArrowDownIcon_mi57p_12",qn="_overview_mi57p_16",Gn="_ListItemButton_mi57p_20",P={NavLink:Qn,CollapseClick:Hn,ArrowDownIcon:Wn,overview:qn,ListItemButton:Gn},rt=({className:t,...n})=>e.jsx(Bt,{className:classNames(t,P.ListItemButton),...n}),ot=t=>{const{text:n="",path:s="",setOpen:a,...r}=t,[o,l]=React.useState(!1),[c,d]=React.useState(!0),i=ReactRedux.useDispatch();return e.jsx(rt,{selected:o,disableGutters:!0,...r,children:e.jsx(Gt,{to:s,className:({isActive:p})=>ReactDOM.unstable_batchedUpdates(()=>(l(p),p&&c&&a?.(),d(!1),P.NavLink)),onClick:()=>{i({type:et.SET_TITLE,payload:{title:n}})},children:e.jsx(Xe,{primary:n})})})},Jn=({item:t})=>{const{children:n,id:s,path:a=""}=t,[r,o]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(rt,{onClick:o.bind(null,!r),className:classNames(P.CollapseClick,{[P.CollapseClickActive??""]:r}),children:[e.jsx(Xe,{primary:s}),e.jsx(me,{className:classNames({[P.ArrowDownIcon??""]:r})})]}),e.jsx(Ye,{in:r,children:e.jsx("ul",{children:n?.map((l,c)=>e.jsx("li",{children:e.jsx(ot,{text:l.id??"",path:ke(a,l.path??""),setOpen:o.bind(null,!0)})},c))})})]})};function Kn(t){const{menuOpen:n,menuOpenFalse:s,...a}=t;return e.jsx(React.StrictMode,{children:e.jsx(ve,{injectFirst:!0,children:e.jsx($t,{anchor:"left",open:n,onClose:s,...a,children:it.map((r,o)=>{const{children:l,id:c="",path:d=""}=r;return e.jsxs(React.StrictMode,{children:[e.jsx(Lt,{children:l?e.jsx(Jn,{item:r}):e.jsx(ot,{text:c,path:ke(d),className:P.overview??""})},o),e.jsx(ye,{})]})})})})})}function Yn(){_e(),je(()=>{});const[t,n]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsx(kn,{menuOpenTrue:n.bind(null,!0)}),e.jsx(Kn,{menuOpen:t,menuOpenFalse:n.bind(null,!1)}),e.jsx(Ze,{})]})}const Xn="_loginBody_1iyc9_1",Zn="_input_1iyc9_19",lt={loginBody:Xn,input:Zn},ea={className:lt.input??"",variant:"outlined"};function ta(){const t=_e(),n=ReactRedux.useDispatch(),[s,a]=de({adminId:"1038762",password:"666666",scode:""}),[r,o]=React.useState(!1),{adminId:l,password:c,scode:d}=s,i=/^[A-Z]\d{6}$/.test(l),p=/^\w{6,20}$/.test(c),m=/^\w{5}$/.test(d),x=(f="",O=!0,y="",re="")=>({...ea,...r?f?O?{}:{error:!0,helperText:re}:{error:!0,helperText:y}:{}});pt(()=>{o(!1)},[i,p,m]);const[R,A]=React.useState(""),h=()=>Dn().then(f=>A(f??""));React.useEffect(()=>{h()},[]);const{run:v,loading:T}=Se(()=>Bn(s)(n).then(f=>f?t("/"):h()).catch(console.error),{...Ie,manual:!0});return e.jsx(React.StrictMode,{children:e.jsx("div",{className:lt.loginBody,children:e.jsxs("div",{children:[e.jsx("h3",{children:"移动监控面板"}),e.jsx(Z,{label:"账号",onChange:f=>a({adminId:f.target.value}),...x(l,i,"请输入账号","账号格式不正确"),autoFocus:!0,autocomplete:!0,maxlength:7,pattern:/^\d{7}$/}),e.jsx(Z,{label:"密码",type:"password",onChange:f=>a({password:f.target.value}),...x(c,p,"请输入密码","密码格式不正确"),maxlength:20,autocomplete:!0,pattern:/^\w{6,20}$/}),e.jsx("img",{src:`data:image/jpeg;base64,${R}`,alt:"No Network",onClick:()=>h()}),e.jsx(Z,{label:"验证码",onChange:f=>a({scode:f.target.value}),...x(d,m,"请输入验证码","验证码格式不正确"),maxlength:5,autocomplete:!0,pattern:/^\w{5}$/}),e.jsx(Dt,{variant:"contained",size:"large",loading:T,onClick:()=>{o(!0),!(!i||!p||!m)&&v()},children:"登录"})]})})})}function na(){return je(()=>{Fn().then(t=>{})}),e.jsx(React.StrictMode,{children:e.jsx(Ze,{})})}function aa({dom:t,option:n,data:s}){try{const a=echarts.getInstanceByDom(t)??echarts.init(t);return a.setOption({animation:!0,animationDuration:1500,animationEasingUpdate:"quinticInOut",tooltip:{},legend:{},...n,series:{type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},labelLine:{show:!0},...n?.series,data:s}}),a}catch{return}}const sa="_echarts_kd7ge_1",ra="_loading_kd7ge_6",oa="_noLoading_kd7ge_16",fe={echarts:sa,loading:ra,noLoading:oa},{freeze:la}=Object,ie=la([{type:"day",label:"日销量"},{type:"month",label:"月销量"},{type:"year",label:"年销量"}]),ca=t=>{const{data:n}=t,s=React.useRef(null),{current:a}=s;return React.useEffect(()=>{setTimeout(()=>{if((a||s.current)&&n)try{aa({dom:a??s.current??document.createElement("div"),data:n})}catch{}})},[a,n]),e.jsx("div",{ref:s,className:classNames(fe.echarts),...a&&{style:{"--offsetTop":`${a?.offsetTop}px`}}})};function ia(){const[t,n]=React.useState("0"),s=ie[Number(t)]?.type??"",{data:a,loading:r,run:o}=Se(d=>Un({...d,type:s}),{...Ie,refreshDeps:[s]}),l=r||!a,c=React.useRef(null);return e.jsxs(React.StrictMode,{children:[e.jsx(st,{ref:c,run:d=>o({...d,type:s})}),e.jsxs(Et,{value:t,children:[e.jsx(Ft,{centered:!0,value:t,onChange:(d,i)=>{n(i.toString())},children:ie.map((d,i)=>e.jsx(Ut,{value:i.toString(),label:d.label},i))}),e.jsx(ye,{}),ie.map((d,i)=>e.jsx(Vt,{value:i.toString(),className:classNames(l?fe.loading:fe.noLoading),children:e.jsx(React.StrictMode,{children:r?e.jsx(Ke,{}):e.jsx(ca,{data:a})})},i))]})]})}function ua(){return e.jsx(React.StrictMode,{children:e.jsx(Te,{columns:[{label:"index",text:"销量排名"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"销量"},{label:"rate",text:"占比",format:t=>`${t.toLocaleString()}%`},{label:"priceLevel",text:"价格段"}],action:t=>Vn(t).then(n=>n?[...n,{index:"",phoneType:"合计",salesNum:n.filter(s=>!!s).reduce((s,a)=>s+a?.salesNum,0),rate:100,priceLevel:""}]:[])})})}function da(){return e.jsx(React.StrictMode,{})}const Qe=t=>`${(t*100).toLocaleString()}%`,ma=[{label:"channelType",text:"渠道类型"},{label:"channelNums",text:"渠道数量"},{label:"saleChannelsNum",text:"有销渠道数量"},{label:"saleChannelsRatio",format:Qe,text:"有销渠道占比"},{label:"validChannelsNum",text:"有效渠道数量"},{label:"validChannelsRatio",text:"有效渠道占比",format:Qe}];function pa(){return e.jsx(React.StrictMode,{children:e.jsx(Te,{columns:ma,action:zn})})}function ha(){return e.jsx(React.StrictMode,{})}function xa(){return e.jsx(React.StrictMode,{})}function ga(){return e.jsx(React.StrictMode,{})}var ct=(t=>(t.login="login",t.auth="auth",t.overview="overview",t.SalesVolumeMonitoring="SalesVolumeMonitoring",t.DistributionOfTerminalSales="DistributionOfTerminalSales",t.TerminalActivitySalesStructure="TerminalActivitySalesStructure",t.SalesStructureOfTerminalPriceRanges="SalesStructureOfTerminalPriceRanges",t.TOP10ModelInformation="TOP10ModelInformation",t.QualityOfTerminalSalesInThePanAlliance="QualityOfTerminalSalesInThePanAlliance",t.SalesSituationOfTerminalSubChannels="SalesSituationOfTerminalSubChannel",t.PurchaseQuantityMonitoring="PurchaseQuantityMonitoring",t.OrderQuantityOfMobileTerminals="OrderQuantityOfMobileTerminals",t.InventoryMonitoring="InventoryMonitoring",t.InventoryQuantity="InventoryQuantity",t.InventoryStructure="InventoryStructure",t))(ct||{});const fa=React.lazy(()=>Xt(()=>import("./index-fHfQaAyd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),it=[{path:"",id:"总览",element:e.jsx(na,{})},{path:"SalesVolumeMonitoring",id:"终端销量分布",children:[{path:"DistributionOfTerminalSales",id:"终端销量分布",element:e.jsx(React.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(fa,{})})},{path:"TerminalActivitySalesStructure",id:"终端活动销售结构",element:e.jsx(ia,{})},{path:"SalesStructureOfTerminalPriceRanges",id:"终端各价位段销售结构",element:e.jsx(Mn,{})},{path:"TOP10ModelInformation",id:"TOP10机型信息",element:e.jsx(ua,{})},{path:"QualityOfTerminalSalesInThePanAlliance",id:"泛全联盟终端销售质量",element:e.jsx(da,{})},{path:"SalesSituationOfTerminalSubChannel",id:"终端分渠道销售情况",element:e.jsx(pa,{})}]},{path:"PurchaseQuantityMonitoring",id:"进货量监控",children:[{path:"OrderQuantityOfMobileTerminals",id:"手机终端订货数量",element:e.jsx(ha,{})}]},{path:"InventoryMonitoring",id:"库存量监控",children:[{path:"InventoryQuantity",id:"库存数量",element:e.jsx(xa,{})},{path:"InventoryStructure",id:"库存结构",element:e.jsx(ga,{})}]}],ke=(...t)=>`/${t.join("/")}`;function Sa(){return e.jsxs(qt,{children:[e.jsx(J,{path:"login",element:e.jsx(ta,{})}),e.jsx(J,{path:"/",element:e.jsx(Yn,{}),children:it.map((t,n)=>e.jsx(J,{path:t.path??"",element:t.element,children:t.children?.map((s,a)=>e.jsx(J,{path:s.path??"",element:s.element},a))},n))})]})}const ja=Redux.combineReducers({SnackBar:$n,AppBarTitle:bn}),ut=Redux.legacy_createStore(ja,Redux.applyMiddleware(ReduxThunk));ut.subscribe(()=>{});const ba="_Snackbar_1t4e7_1",va={Snackbar:ba};function ya(){const{open:t,alertText:n,severity:s}=Ln(o=>({open:o.SnackBar.open,alertText:o.SnackBar.alertText,severity:o.SnackBar.severity})),a=ReactRedux.useDispatch(),r=(o,l)=>{l!=="clickaway"&&a({type:ae.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(zt,{open:!!(t&&n),autoHideDuration:6e3,onClose:r,message:n,className:va.Snackbar??"",children:e.jsx(Qt,{onClose:r,severity:s,variant:"filled",children:n})})})}const Ie={loadingDelay:300,throttleWait:300};function _a(){return e.jsx(React.StrictMode,{children:e.jsx(ve,{injectFirst:!0,children:e.jsxs(Ht,{children:[e.jsx(Wt,{}),e.jsx(ReactRedux.Provider,{store:ut,children:e.jsxs(React.StrictMode,{children:[e.jsx(Jt,{children:e.jsx(Sa,{})}),e.jsx(ya,{})]})})]})})})}const{location:dt,process:Ra,addEventListener:Ta}=window??self??globalThis??void 0,Ne=(Ra?.env?.PUBLIC_URL??"./")?.replace("/",""),ka=new URL(Ne,dt?.href),{serviceWorker:ue}=navigator,He=`${Ne}/service-worker.js`,Ia=t=>{ka?.origin!==dt?.origin||!ue||Ne===void 0||Ta("load",()=>{fetch(He,{headers:{"Service-Worker":"script"}}).then(n=>{const s=n.headers.get("Content-Type");n.status===404||s&&s!=="application/javascript"||ue?.register(He)?.then(a=>{a.onupdatefound=()=>{const{installing:r}=a;r&&(r.onstatechange=()=>{r?.state==="installed"&&(ue?.controller?t?.onUpdate?.(a):t?.onSuccess?.(a))})}})?.catch(a=>{})})})},{random:S}=Math;Mock.mock(/\/api\/sale\/subregion.*/,"get",{code:1e3,"data|1-50":[{regionName:"@city",daySalesNum:~~(S()*10),monthSalesNum:~~(S()*100),monthRelativeRate:(S()-.5)*10,yearSalesNum:~~(S()*1e3),level:1}]});Mock.mock(/\/api\/SalesVolumeMonitoring\/TerminalActivitySalesStructure\?.*type=year.*/,"get",{code:1e3,data:[{value:~~(S()*1e3),name:"顺差让利"},{value:~~(S()*1e3),name:"分期合约"},{value:~~(S()*1e3),name:"金币合约"}]});Mock.mock(/\/api\/SalesVolumeMonitoring\/TerminalActivitySalesStructure\?.*type=month.*/,"get",{code:1e3,data:[{value:~~(S()*100),name:"顺差让利"},{value:~~(S()*100),name:"分期合约"},{value:~~(S()*100),name:"金币合约"}]});Mock.mock(/\/api\/SalesVolumeMonitoring\/TerminalActivitySalesStructure\?.*type=day.*/,"get",{code:1e3,data:[{value:~~(S()*10),name:"顺差让利"},{value:~~(S()*10),name:"分期合约"},{value:~~(S()*10),name:"金币合约"}]});const Na=()=>" ".repeat(25).split(" ").map((t,n)=>({label:String.fromCharCode(n+65),id:n}));Mock.mock(/\/api\/getAddressList.*/,"get",{code:1e3,data:Na()});ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx(_a,{})}),document.body);Ia();export{Te as M,ze as g,N as r};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-fHfQaAyd.js","./react-ejZHSj7z.js","./object-assign-4_VUvG2Z.js","./ahooks-bNACcRMN.js","./tslib-g6pQwBLH.js","./lodash-liWoq_f8.js","./@babel-moqvDIRK.js","./@mui-6FW4yal6.js","./@emotion-tNa4IMmz.js","./hoist-non-react-statics-o0ngdJFr.js","./stylis-UTZzoVRx.js","./clsx-2Jv0kmJG.js","./@popperjs-v-la0Vhf.js","./react-router-GnPFSUwy.js","./@remix-run-Tfa50bkj.js","./react-router-dom-kzRaAek2.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
