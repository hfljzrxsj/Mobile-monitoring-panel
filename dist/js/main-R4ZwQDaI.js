import{j as t}from"./react-24-O7H2m.js";import{e as en}from"./@remix-run-nSxv3ELK.js";import{B as Ue,F as tn,d as nn,D as At,A as Pt,I as $t,a as an,T as Ie,b as sn,c as at,e as st,f as $e,g as rt,h as rn,i as ge,C as Dt,j as on,k as ln,P as be,l as cn,L as ot,m as Mt,S as ze,n as un,o as dn,p as mn,q as lt,r as ct,s as pn,t as hn,u as xn,v as fn,w as Bt,x as gn,y as jn,z as Sn,E as bn,G as vn,H as yn,J as _n,K as Rn,M as Tn,N as Nn,O as In,Q as On,R as wn,U as Cn,V as An}from"./@mui-ZQF2x56C.js";import{c as Qe,O as Pn,d as $n,e as me}from"./react-router-AQZaUe--.js";import{u as De,a as Lt,b as ye,c as Dn}from"./ahooks-XUeTMw_U.js";import{N as Mn,H as Bn}from"./react-router-dom-9FyeBW54.js";import"./object-assign-xLi3eZUp.js";import"./@emotion-QRY_AlUX.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@popperjs-zyV4rJhQ.js";import"./tslib-g6pQwBLH.js";import"./lodash-JD0k9kaZ.js";function us(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const Ln="modulepreload",kn=function(e,n){return new URL(e,n).href},it={},En=function(n,s,a){let r=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link");r=Promise.all(s.map(l=>{if(l=kn(l,a),l in it)return;it[l]=!0;const u=l.endsWith(".css"),i=u?'[rel="stylesheet"]':"";if(!!a)for(let h=o.length-1;h>=0;h--){const x=o[h];if(x.href===l&&(!u||x.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(l,'"]').concat(i)))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Ln,u||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),u)return new Promise((h,x)=>{m.addEventListener("load",h),m.addEventListener("error",()=>x(new Error("Unable to preload CSS for ".concat(l))))})}))}return r.then(()=>n()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},kt=1e3,M="adminId",D="Authorization",O="orgId",z=axios.defaults,{common:N}=z.headers,Fn=axios.CancelToken.source(),Un=()=>{localStorage.removeItem(D),en(Te(Re.login))};z.baseURL="http://121.196.247.3";z.withCredentials=!1;var jt,St;(St=N[D])!=null||(N[D]=(jt=localStorage.getItem(D))!=null?jt:"");var bt,vt;(vt=N[M])!=null||(N[M]=(bt=localStorage.getItem(M))!=null?bt:"");const L=(e,n)=>{var s,a,r,o;try{const l=(s=localStorage.getItem(D))!=null?s:n;return l?String((o=JSON.parse(atob((r=(a=l.split("."))==null?void 0:a[1])!=null?r:"")))==null?void 0:o[e]):""}catch(l){return""}},B="level",K=e=>L(B,e);var yt;(yt=N[B])!=null||(N[B]=K());var _t;(_t=N[O])!=null||(N[O]=L(O));const zn=new AbortController;z.signal=zn.signal;z.cancelToken=Fn.token;const pe=window.caches,{adapter:he}=z,Me=e=>{try{return JSON.stringify(e)}catch(n){return""}},Qn=({url:e,headers:n,params:s,data:a})=>[e,n==null?void 0:n[D],n==null?void 0:n[M],n==null?void 0:n[B],Me(s),Me(a)].join("_");he&&typeof he=="function"&&(z.adapter=async e=>{if(!pe)return he(e);const{url:n="",headers:s={},params:a,data:r}=e,o=Qn({url:n,headers:s,params:a,data:r}),l=await(pe==null?void 0:pe.open(n)),u=await(l==null?void 0:l.match(o));if(u)return await u.json();const i=await he(e),{status:p,data:m}=i;return p===200&&typeof m=="string"&&m.includes(String(kt))&&await(l==null?void 0:l.put(o,new Response(Me(i)))),i});axios.interceptors.request.use(async e=>e,e=>Promise.reject(e));axios.interceptors.response.use(async e=>(e.data.code===1003&&Un(),e),async e=>Promise.reject(e));const Hn="_AppBar_z9nlw_1",qn="_menuIcon_z9nlw_11",Vn="_Avatar_z9nlw_19",Gn="_open_z9nlw_27",Jn="_Popover_z9nlw_39",Kn="_DialogActions_z9nlw_49",q={AppBar:Hn,menuIcon:qn,Avatar:Vn,open:Gn,Popover:Jn,DialogActions:Kn};var Et=(e=>(e.SET_TITLE="SET_TITLE",e))(Et||{}),Ft=(e=>(e.title="title",e))(Ft||{});const Wn={title:""},Yn=(e=Wn,n)=>{const{type:s,payload:a={}}=n;switch(s){case"SET_TITLE":return{...e,...a};default:return e}},Xn=ReactRedux.useSelector,Zn="_root_x6ehs_1",ea="_Skeleton_x6ehs_4",ta="_aLink_x6ehs_14",Oe={root:Zn,Skeleton:ea,aLink:ta},na="_AppBar_7v5rf_1",aa="_menuIcon_7v5rf_11",sa="_Avatar_7v5rf_19",ra="_open_7v5rf_27",oa="_Popover_7v5rf_39",la="_DialogActions_7v5rf_49",ca="_ToggleButtonGroup_7v5rf_60",ia="_date_7v5rf_69",ua="_AccordionDetails_7v5rf_87",da="_AccordionSummary_7v5rf_91",ma="_filterResult_7v5rf_96",pa="_Breadcrumbs_7v5rf_111",ha="_CurrentFilterShow_7v5rf_118",A={AppBar:na,menuIcon:aa,Avatar:sa,open:ra,Popover:oa,DialogActions:la,ToggleButtonGroup:ca,date:ia,AccordionDetails:ua,AccordionSummary:da,filterResult:ma,Breadcrumbs:pa,CurrentFilterShow:ha};var ve=(e=>(e.SnackbarAlert="SnackbarAlert",e.OPENTRUE="OPENTRUE",e.OPENFALSE="OPENFALSE",e))(ve||{}),re=(e=>(e.alertText="alertText",e.open="open",e.severity="severity",e))(re||{}),Be=(e=>(e.error="error",e.info="info",e.success="success",e.warning="warning",e))(Be||{});const xa={alertText:"",open:!1,severity:"success"},fa=(e=xa,n)=>{const{type:s,payload:a={}}=n,r=o=>({...e,...a,open:o});switch(s){case"OPENFALSE":return r(!1);case"OPENTRUE":return r(!0);default:return e}},ga=ReactRedux.useSelector,W=()=>({[B]:Number(K())||0,orgId:L(O)||"HB",date:Ht(U())}),_e=()=>({...W(),type:"year"}),Le="uuid",xe=(e,n)=>{N[e]=n,localStorage.setItem(e,n)},ja=({adminId:e,password:n,scode:s})=>a=>axios.post("/api/user/login",null,{params:{adminId:e,password:n,scode:s,uuid:sessionStorage.getItem(Le)}}).then(r=>{var i;const{code:o,info:l,data:u}=(i=r.data)!=null?i:{};return r.status===200&&o===kt?(a({type:ve.OPENTRUE,payload:{[re.alertText]:"登录成功",[re.severity]:Be.success}}),xe(D,"Bearer "+u.jwt),xe(M,e),xe(B,K(String(u.level))),xe(O,L(O,u.orgId)),localStorage.setItem(w,u.orgnization),!0):Promise.reject(l)}).catch(r=>{a({type:ve.OPENTRUE,payload:{[re.alertText]:String(r),[re.severity]:Be.error}})}),Sa=()=>axios.get("/api/scode/",{params:{[Le]:(()=>{const e=uuid.v4().replaceAll("-","");return sessionStorage.setItem(Le,e),e})()}}).then(e=>{var n;return(n=e==null?void 0:e.data)==null?void 0:n.data}).catch(console.error),oe=e=>({params:{...W(),...e}}),ke=(e=W())=>axios.get("/api/sale/subregion",oe(e)).then(n=>n.data.data).catch(console.error),Ut=({type:e,...n}=_e())=>axios.get("/api/sale/structure/".concat(e),oe({...n})).then(s=>s.data.data.salesRecordMap).catch(console.error),je=["scRatio","feRatio","jbRatio"],ba={[je[0]]:"顺差让利",[je[1]]:"分期合约",[je[2]]:"金币合约"},va=({type:e,...n}=_e())=>axios.get("/api/sale/contract/".concat(e),oe({...n})).then(s=>Object.entries(s.data.data).filter(a=>je.includes(a[0])).map(a=>{var r,o;return{value:(r=a[1])!=null?r:0,name:(o=ba[a[0]])!=null?o:""}})).catch(console.error),zt=({type:e,...n}=_e())=>axios.get("/api/sale/topPhone/".concat(e),oe({...n})).then(s=>s.data.data.phoneInfoRank).then(s=>Object.keys(s).map((a,r)=>{const o=s[r+1];return o?{...o,index:String(a)}:{phoneType:"",salesNum:0,rate:0,priceLevel:"",index:"0"}})).then(s=>s.filter(a=>!!a.salesNum)).catch(console.error),ya=(e=W())=>axios.get("/api/sale/channel/situation",oe(e)).then(n=>n.data.data).catch(console.error),{fromEntries:fe}=Object,J="-",He=(e=new Date)=>String(e.getDate()).padStart(2,"0"),Qt=(e=new Date)=>String(e.getMonth()+1).padStart(2,"0"),U=(e=new Date)=>e.getFullYear()+J+Qt(e)+J+He(e),Ht=e=>e.replaceAll(J,"/"),qt=1e3*60*60*24,ut=e=>U(new Date(new Date().getTime()-qt*e)),qe="month",Ee=new Date().getFullYear(),se=e=>(e+J+Qt()+J+He()).slice(0,10),dt=e=>{const n=new Date,s=new Date(e);return n.setUTCMinutes(n.getUTCMinutes()-n.getTimezoneOffset()),s.setUTCMinutes(s.getUTCMinutes()-s.getTimezoneOffset()),Math.floor(Math.abs(s.getTime()-n.getTime())/qt)},mt=[{label:"year",text:"".concat(Ee,"年")},{label:qe,text:"按月筛选"},{label:"day",text:"按日筛选"}],we=[{label:"year",text:"按年筛选"},{label:qe,text:"按月筛选"},{label:"day",text:"按日筛选"}],Fe=[{text:"市",label:"city_id"},{text:"区县",label:"area_id"},{text:"网格",label:"grid_id"},{text:"营业厅",label:"end_id"}],Ve="-1",_a=(e,n)=>[{[w]:"所有".concat(n),regionId:Ve},...e],Vt=e=>n=>{const s=e[n.label];return!s||(s==null?void 0:s.regionId)===Ve},pt=e=>{var x,_,y;const{address:n,hasDataIndex:s,time:a,f:r=void 0,noNeedTime:o=!1,noNeedAddress:l=!1,unitName:u=[],setBreadcrumbsAddress:i}=e,p=!o&&!l,m=a.split(J),h=localStorage.getItem(w);return t.jsxs(be,{className:(x=A.filterResult)!=null?x:"",elevation:9,children:[p&&t.jsxs(React.StrictMode,{children:[t.jsxs("div",{children:["当前",t.jsx("wbr",{}),"筛选"]}),t.jsx("span",{children:"{"})]}),t.jsxs("div",{children:[t.jsxs("div",{children:[p&&"地理位置：",t.jsxs(cn,{className:(_=A.Breadcrumbs)!=null?_:"",children:[s?t.jsx(ot,{onClick:()=>{i(-1)},children:h}):t.jsx("span",{children:h}),u.filter(j=>!Vt(n)(j)).map((j,v,S)=>{var f,I;return v===S.length-1?t.jsx("span",{children:(f=n[j.label])==null?void 0:f[w]}):t.jsx(ot,{onClick:()=>{i(v)},children:(I=n[j.label])==null?void 0:I[w]},v)}),s>=0&&t.jsx("span",{children:"所有".concat((y=u[s])==null?void 0:y.text)})]})]}),p&&t.jsx(Mt,{}),!o&&t.jsxs("p",{children:[p&&"时间范围：",(()=>{var S,f,I;const j="".concat(m[0],"年"),v="".concat(j+m[1],"月");switch(r==null?void 0:r.label){case((S=mt[0])==null?void 0:S.label):return j;case((f=mt[1])==null?void 0:f.label):return v;default:return"".concat(v).concat((I=m[2])!=null?I:He(),"日")}})()]})]})]})},Ge=React.forwardRef((e,n)=>{var X,Z,ee,te,ne,Ke,We,Ye,Xe;const s=Number((X=localStorage.getItem(B))!=null?X:K()),a=s?Fe.slice(s):Fe,{run:r,noNeedTime:o=!1,noNeedAddress:l=!1,timeNeedDay:u=!1}=e,i=u?we:we.slice(0,we.length-1),[p,m]=React.useState((Z=i[0])==null?void 0:Z.label),[h,x]=React.useState(U()),[_,y]=De(fe(a.map(c=>[c.label,null]))),[j,v]=De(fe(a.map(c=>[c.label,[]])));Lt(()=>ReactDOM.unstable_batchedUpdates(()=>{ke({level:s,[O]:L(O)}).then(c=>{var b;const d=(b=a[0])==null?void 0:b.label;c&&d&&v({[d]:c})})}));const S=a.findIndex(Vt(_)),f=S<0?a.length:S,I=i.find(c=>c.label===p),[k,g]=React.useState(!1),C=React.useCallback(c=>ReactDOM.unstable_batchedUpdates(()=>{y(fe(a.filter((d,b)=>b>c).map(d=>[d.label,null]))),g(!0)}),[]),Q={address:_,hasDataIndex:S,time:h,f:I,noNeedAddress:l,noNeedTime:o,unitName:a,setBreadcrumbsAddress:C},[ce,P]=React.useState(!1),[Y,ie]=React.useState(Q),H=W().orgId;return React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{var c,d;if(k){const b=(c=a[f-1])==null?void 0:c.label,R=b?(d=_[b])==null?void 0:d.regionId:H;r({...!o&&{date:Ht(se(h)),...p&&{type:p}},[O]:R!=null?R:H,level:f+s}),ie(Q),P(!1),g(!1)}}),[k]),React.useImperativeHandle(n,()=>({toDown:c=>ReactDOM.unstable_batchedUpdates(()=>{var E;if(!c)return;const{regionName:d,regionId:b}=c,R=(E=a[S])==null?void 0:E.label;R&&(y({[R]:{regionId:b,regionName:d}}),g(!0))})})),t.jsxs(React.StrictMode,{children:[t.jsxs("div",{className:A.CurrentFilterShow,children:[!l&&t.jsx(Ue,{variant:"contained",size:"large",onClick:P.bind(null,!0),children:"筛选器"}),!!Y.hasDataIndex&&t.jsxs(tn,{variant:"extended",color:"primary",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{var d;const c=(d=a[f-1])==null?void 0:d.label;c&&(y({[c]:null}),g(!0))}),children:[t.jsx(nn,{}),"返回上级"]}),t.jsx(pt,{...Y})]}),t.jsxs(At,{open:ce,fullScreen:!0,children:[t.jsxs(Pt,{className:(ee=A.AppBar)!=null?ee:"",position:"sticky",children:[t.jsx($t,{size:"large",className:(te=A.menuIcon)!=null?te:"",onClick:P.bind(null,!1),children:t.jsx(an,{})}),t.jsx(Ie,{children:"筛选器"}),t.jsx(Se,{autoFocus:!0,variant:"contained",color:"success",endIcon:t.jsx(sn,{}),onClick:()=>{g(!0)},children:"确定"})]}),t.jsx(pt,{...Q}),!l&&t.jsxs(at,{defaultExpanded:!0,elevation:24,children:[t.jsx(st,{expandIcon:t.jsx($e,{}),className:(ne=A.AccordionSummary)!=null?ne:"",children:t.jsx(Ie,{children:"地理范围筛选"})}),t.jsx(rt,{className:(Ke=A.AccordionDetails)!=null?Ke:"",children:a.map((c,d)=>{var et,tt;if(S>=0&&d>S)return t.jsx(t.Fragment,{});const{label:b}=c,R=j[b];if(!R)return t.jsx(t.Fragment,{});const E=_a(R,c.text),Ze=!R.length;return t.jsx(rn,{disablePortal:!0,autoSelect:!0,autoComplete:!0,autoFocus:!0,autoHighlight:!0,loading:Ze,options:E,getOptionLabel:$=>{var T;return(T=$==null?void 0:$.regionName)!=null?T:""},isOptionEqualToValue:($,T)=>$.regionId===T.regionId,onChange:($,T)=>ReactDOM.unstable_batchedUpdates(()=>{if(!T)return;y(fe(a.filter((ae,de)=>de>=d).map(ae=>[ae.label,null])));const ue=T==null?void 0:T.regionId;y({[b]:T}),d!==a.length-1&&ue!==Ve&&ke({level:s+d+1,orgId:ue}).then(ae=>{var nt;const de=(nt=a[d+1])==null?void 0:nt.label;ae&&de&&v({[de]:ae})})}),value:(tt=(et=_[b])!=null?et:E[0])!=null?tt:null,renderInput:({size:$,InputProps:T,...ue})=>t.jsx(ge,{...$&&{size:$},...ue,InputProps:{...T,endAdornment:t.jsxs(React.StrictMode,{children:[Ze?t.jsx(Dt,{}):null,T.endAdornment]})},label:"请选择".concat(c.text)}),noOptionsText:"无此选项"},d)})})]}),!o&&t.jsxs(at,{defaultExpanded:!0,elevation:24,children:[t.jsx(st,{expandIcon:t.jsx($e,{}),className:(We=A.AccordionSummary)!=null?We:"",children:t.jsx(Ie,{children:"时间范围筛选"})}),t.jsxs(rt,{children:[t.jsx(on,{color:"primary",value:p,exclusive:!0,onChange:(c,d)=>{var b,R;d===((b=i[2])==null?void 0:b.label)&&dt(se(h))>90&&x(U()),d===((R=i[1])==null?void 0:R.label)&&dt(se(h))>30&&x(U()),m(E=>d!=null?d:E)},className:(Ye=A.ToggleButtonGroup)!=null?Ye:"",children:i.map((c,d)=>{var b;return t.jsx(ln,{value:(b=c.label)!=null?b:"",children:c.text},d)})}),t.jsxs("label",{className:classNames(A.date),children:["请选择周期：",p===((Xe=i[0])==null?void 0:Xe.label)?t.jsx("select",{onChange:c=>{x(c.target.value)},value:h,children:" ".repeat(2).split("").map((c,d)=>t.jsx("option",{value:String(Ee-d),children:"".concat(Ee-d,"年")},d))}):t.jsx("input",{type:(()=>{var c,d;switch(p){case((c=i[2])==null?void 0:c.label):return"date";case((d=i[1])==null?void 0:d.label):return qe;default:return"hidden"}})(),value:(()=>{var c;switch(p){case((c=i[1])==null?void 0:c.label):return h.slice(0,7);default:return se(h)}})(),onChange:c=>{x(c.target.value)},min:(()=>{var c;switch(p){case((c=i[1])==null?void 0:c.label):return ut(90).slice(0,7);default:return se(ut(30))}})(),max:(()=>{var c;switch(p){case((c=i[1])==null?void 0:c.label):return U().slice(0,7);default:return U()}})()})]})]})]})]})]})}),w="regionName",ht=" ".repeat(10).split(""),Ra="河北省";function le(e){var I,k;const{columns:n,action:s,noNeedTime:a,noNeedAddress:r,timeNeedDay:o,totalSum:l=!1,...u}=e,[i,p]=React.useState(0),[m,h]=React.useState(10),{data:x=ht,loading:_,run:y}=ye(s,Ne),j=React.useRef(null),v=React.useRef(null),S=_||!x,f=(I=l?x:x==null?void 0:x.slice(i*m,i*m+m))!=null?I:ht;return t.jsx(React.StrictMode,{children:t.jsx(ze,{injectFirst:!0,children:t.jsxs(be,{className:classNames(Oe.root),elevation:24,...u,children:[t.jsx(Ge,{ref:v,run:y,noNeedTime:a,noNeedAddress:r,timeNeedDay:o}),t.jsx(un,{children:t.jsxs(dn,{stickyHeader:!0,children:[t.jsx(mn,{ref:j,children:t.jsx(lt,{children:n.map((g,C)=>t.jsx(ct,{align:"center",children:g.text},C))})}),t.jsx(pn,{children:f.map((g,C)=>{var Q,ce;return t.jsx(lt,{hover:!0,children:S||typeof g=="string"?t.jsx("td",{colSpan:n.length,className:(Q=Oe.Skeleton)!=null?Q:"",style:{"--height":"".concat((ce=j.current)==null?void 0:ce.clientHeight,"px")},children:t.jsx(hn,{variant:"rounded",animation:"wave"})}):n.map((P,Y)=>{var X;const ie=P==null?void 0:P.label,H=g==null?void 0:g[ie];return t.jsx(ct,{align:"center",...w===ie&&Y===0&&Number(g.level)!==Fe.length&&{onClick:()=>{var Z,ee,te,ne;(ne=v.current)==null||ne.toDown({regionId:(Z=g.regionId)!=null?Z:W().orgId,[w]:(te=(ee=g[w])!=null?ee:localStorage.getItem(w))!=null?te:Ra})},className:(X=Oe.aLink)!=null?X:""},children:P.format&&typeof H=="number"?P.format(H):String(H)},Y)})},C)})})]})}),!l&&t.jsx(xn,{component:"div",count:(k=x==null?void 0:x.length)!=null?k:10,rowsPerPage:m,page:i,onPageChange:(g,C)=>{p(C)},onRowsPerPageChange:g=>ReactDOM.unstable_batchedUpdates(()=>{h(+g.target.value),p(0)}),labelDisplayedRows:g=>{var C;return"".concat(g.from,"-").concat(isNaN(g.to)?1:g.to,"/共").concat((C=g.count)!=null?C:0,"项")},labelRowsPerPage:"每页行数："})]})})})}const Ta="_NavLink_mi57p_1",Na="_CollapseClick_mi57p_9",Ia="_ArrowDownIcon_mi57p_12",Oa="_overview_mi57p_16",wa="_ListItemButton_mi57p_20",V={NavLink:Ta,CollapseClick:Na,ArrowDownIcon:Ia,overview:Oa,ListItemButton:wa},Gt=({className:e,...n})=>t.jsx(jn,{className:classNames(e,V.ListItemButton),...n}),Jt=e=>{const{text:n="",path:s="",setOpen:a,...r}=e,[o,l]=React.useState(!1),[u,i]=React.useState(!0),p=ReactRedux.useDispatch();return t.jsx(Gt,{selected:o,disableGutters:!0,...r,children:t.jsx(Mn,{to:s,className:({isActive:m})=>ReactDOM.unstable_batchedUpdates(()=>(l(m),m&&u&&(a==null||a()),i(!1),V.NavLink)),onClick:()=>{p({type:Et.SET_TITLE,payload:{title:n}})},children:t.jsx(Bt,{primary:n})})})},Ca=({item:e})=>{var l,u;const{children:n,id:s,path:a=""}=e,[r,o]=React.useState(!1);return t.jsxs(React.StrictMode,{children:[t.jsxs(Gt,{onClick:o.bind(null,!r),className:classNames(V.CollapseClick,{[(l=V.CollapseClickActive)!=null?l:""]:r}),children:[t.jsx(Bt,{primary:s}),t.jsx($e,{className:classNames({[(u=V.ArrowDownIcon)!=null?u:""]:r})})]}),t.jsx(gn,{in:r,children:t.jsx("ul",{children:n==null?void 0:n.map((i,p)=>{var m,h;return t.jsx("li",{children:t.jsx(Jt,{text:(m=i.id)!=null?m:"",path:Te(a,(h=i.path)!=null?h:""),setOpen:o.bind(null,!0)})},p)})})})]})};function Kt(){return t.jsx(React.StrictMode,{children:t.jsx(ze,{injectFirst:!0,children:Xt.map((e,n)=>{var o;const{children:s,id:a="",path:r=""}=e;return t.jsxs(React.StrictMode,{children:[t.jsx(fn,{children:s?t.jsx(Ca,{item:e}):t.jsx(Jt,{text:a,path:Te(r),className:(o=V.overview)!=null?o:""})},n),t.jsx(Mt,{})]})})})})}const Se=({...e})=>t.jsx(Ue,{variant:"contained",size:"large",...e}),Aa=()=>{var e,n;return(n=(e=window.caches)==null?void 0:e.keys())==null?void 0:n.then(s=>s.forEach(a=>{var r;return(r=window.caches)==null?void 0:r.delete(a)})).catch(console.error)};function Pa(e){var h,x,_,y,j,v;const n=Xn(S=>S.AppBarTitle[Ft.title]),[s,a]=React.useState(null),[r,o]=React.useState(!1),l=()=>{o(!1)},u=!!s,i=Qe(),[p,m]=React.useState(!1);return t.jsxs(React.StrictMode,{children:[t.jsxs(Pt,{position:"sticky",className:(h=q.AppBar)!=null?h:"",...e,children:[t.jsx($t,{onClick:m.bind(null,!0),className:(x=q.menuIcon)!=null?x:"",size:"large",children:t.jsx(Sn,{})}),t.jsx("span",{children:n}),t.jsxs(Ue,{className:classNames(q.Avatar,{[(_=q.open)!=null?_:""]:u}),onClick:S=>{a(S.currentTarget)},children:[t.jsx(bn,{}),t.jsx("span",{children:localStorage.getItem(M)}),t.jsx(vn,{})]})]}),t.jsxs(yn,{anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:u,onClose:()=>{a(null)},className:(y=q.Popover)!=null?y:"",children:[t.jsxs("p",{children:["用户等级：",t.jsx("span",{children:K()})]}),t.jsxs("p",{children:["用户权限：",t.jsx("span",{children:(j=localStorage.getItem(w))!=null?j:L(O)})]}),t.jsx(Se,{onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{a(null),o(!0)}),startIcon:t.jsx(_n,{}),children:"退出登录"})]}),t.jsxs(At,{open:r,keepMounted:!0,onClose:l,children:[t.jsx(Rn,{children:"确定要退出登录吗？"}),t.jsxs(Tn,{className:(v=q.DialogActions)!=null?v:"",children:[t.jsx(Se,{onClick:()=>{Aa(),localStorage.clear(),i(Te(Re.login))},children:"确定"}),t.jsx(Se,{onClick:l,children:"取消"})]})]}),t.jsx(Nn,{anchor:"left",open:p,onClose:m.bind(null,!1),children:t.jsx(Kt,{})})]})}function $a(){const e=Qe();return Lt(()=>{(!localStorage.getItem(D)||!K()||!L(O)||!L(M))&&e(Re.login)}),t.jsxs(React.StrictMode,{children:[t.jsx(Pa,{}),t.jsx(Pn,{})]})}const Da="_loginBody_1iyc9_1",Ma="_input_1iyc9_19",Wt={loginBody:Da,input:Ma};var Rt;const Ba={className:(Rt=Wt.input)!=null?Rt:"",variant:"outlined"};function La(){const e=Qe(),n=ReactRedux.useDispatch(),[s,a]=De({adminId:"",password:"",scode:""}),[r,o]=React.useState(!1),{adminId:l,password:u,scode:i}=s,p=/^[A-Z]\d{6}$/.test(l),m=/^\w{6,20}$/.test(u),h=/^\w{5}$/.test(i),x=(f="",I=!0,k="",g="")=>({...Ba,...r?f?I?{}:{error:!0,helperText:g}:{error:!0,helperText:k}:{}});Dn(()=>{o(!1)},[p,m,h]);const[_,y]=React.useState(""),j=()=>Sa().then(f=>y(f!=null?f:""));React.useEffect(()=>{j()},[]);const{run:v,loading:S}=ye(()=>ja(s)(n).then(f=>f?e("/"):j()).catch(console.error),{...Ne,manual:!0});return t.jsx(React.StrictMode,{children:t.jsx("div",{className:Wt.loginBody,children:t.jsxs("div",{children:[t.jsx("h3",{children:"移动监控面板"}),t.jsx(ge,{label:"账号",onChange:f=>a({adminId:f.target.value}),...x(l,p,"请输入账号","账号格式不正确"),autoFocus:!0,autocomplete:!0,maxlength:7,pattern:/^\d{7}$/}),t.jsx(ge,{label:"密码",type:"password",onChange:f=>a({password:f.target.value}),...x(u,m,"请输入密码","密码格式不正确"),maxlength:20,autocomplete:!0,pattern:/^\w{6,20}$/}),t.jsx("img",{src:"data:image/jpeg;base64,".concat(_),alt:"No Network",onClick:()=>j()}),t.jsx(ge,{label:"验证码",onChange:f=>a({scode:f.target.value}),...x(i,h,"请输入验证码","验证码格式不正确"),maxlength:5,autocomplete:!0,pattern:/^\w{5}$/}),t.jsx(In,{variant:"contained",size:"large",loading:S,onClick:()=>{o(!0),!(!p||!m||!h)&&v()},children:"登录"})]})})})}const ka="_Paper_p9qzm_1",Ea={Paper:ka};var Tt;const xt={elevation:24,className:(Tt=Ea.Paper)!=null?Tt:""};function Fa(){return t.jsxs(React.StrictMode,{children:[t.jsx(be,{...xt,children:"移动监控面板"}),t.jsx(be,{...xt,children:t.jsx(Kt,{})})]})}function Ua({dom:e,option:n,data:s}){var a;try{const r=(a=echarts.getInstanceByDom(e))!=null?a:echarts.init(e);return r.setOption({animation:!0,animationDuration:1500,animationEasingUpdate:"quinticInOut",tooltip:{},legend:{},...n,series:{type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},labelLine:{show:!0},...n==null?void 0:n.series,data:s}}),r}catch(r){return}}const za="_echarts_qjzuz_1",Qa="_noLoading_qjzuz_6",Ha="_loading_qjzuz_6",Ce={echarts:za,noLoading:Qa,loading:Ha};function Yt(e){const{data:n,loading:s=!1}=e,a=React.useRef(null),{current:r}=a,o=s||!n;return React.useEffect(()=>{setTimeout(()=>{var l;if((r||a.current)&&n)try{Ua({dom:(l=r!=null?r:a.current)!=null?l:document.createElement("div"),data:n})}catch(u){}})},[r,n]),t.jsx("div",{ref:a,className:classNames(Ce.echarts,o?Ce.loading:Ce.noLoading),...r&&{style:{"--offsetTop":"".concat(r==null?void 0:r.offsetTop,"px")}},children:o&&t.jsx(Dt,{})})}function qa(){const{data:e,loading:n,run:s}=ye(va,{...Ne}),a=React.useRef(null);return t.jsxs(React.StrictMode,{children:[t.jsx(Ge,{ref:a,timeNeedDay:!0,run:s}),t.jsx(Yt,{data:e,loading:n})]})}const Va=[..." ".repeat(5).split("").map((e,n)=>"".concat(n*1e3,"-").concat(n*1e3+1e3,"元")),"5000元以上"];function Ga(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:[{label:"price",text:"机型价位段"},{label:"salesVolume",text:"销量"},{label:"proportion",format:e=>"".concat(e.toLocaleString(),"%"),text:"占比"}],action:e=>Ut(e!=null?e:_e()).then(n=>n&&Va.map(s=>{var a,r,o,l;return{price:s,salesVolume:(r=(a=n[s])==null?void 0:a.salesNum)!=null?r:0,proportion:(l=(o=n[s])==null?void 0:o.ratio)!=null?l:0}})).then(n=>n?[...n,{price:"合计",salesVolume:n.reduce((s,a)=>s+a.salesVolume,0),proportion:100}]:[]),totalSum:!0})})}function Ja(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:[{label:"index",text:"销量排名"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"销量"},{label:"rate",text:"占比",format:e=>"".concat(e.toLocaleString(),"%")},{label:"priceLevel",text:"价格段"}],action:e=>zt(e).then(n=>n?[...n,{index:"",phoneType:"合计",salesNum:n.filter(s=>!!s).reduce((s,a)=>s+(a==null?void 0:a.salesNum),0),rate:100,priceLevel:""}]:[]),totalSum:!0})})}const ft=e=>"".concat((e*100).toLocaleString(),"%"),Ka=[{label:"channelType",text:"渠道类型"},{label:"channelNums",text:"渠道数量"},{label:"saleChannelsNum",text:"有销渠道数量"},{label:"saleChannelsRatio",format:ft,text:"有销渠道占比"},{label:"validChannelsNum",text:"有效渠道数量"},{label:"validChannelsRatio",text:"有效渠道占比",format:ft}];function Wa(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:Ka,action:ya})})}const Ya=[{label:w,text:"单位"},{label:"daySalesNum",text:"日订货量"},{label:"monthSalesNum",text:"月订货量"},{label:"monthRelativeRate",format:e=>"".concat((e*100).toLocaleString(),"%"),text:"月订货量环比"},{label:"yearSalesNum",text:"年订货量"}];function Xa(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:Ya,action:ke,noNeedAddress:!0,noNeedTime:!0})})}function Za(){return t.jsx(React.StrictMode,{children:t.jsx(le,{columns:[{label:"index",text:"库存排序"},{label:"phoneType",text:"机型名称"},{label:"salesNum",text:"库存数量"},{label:"rate",text:"占比",format:e=>"".concat(e.toLocaleString(),"%")},{label:"priceLevel",text:"价格段"}],action:e=>zt(e).then(n=>n?[...n,{index:"",phoneType:"合计",salesNum:n.filter(s=>!!s).reduce((s,a)=>s+(a==null?void 0:a.salesNum),0),rate:100,priceLevel:""}]:[]),totalSum:!0})})}function es(){const{data:e,loading:n,run:s}=ye(()=>Ut().then(r=>r?Object.entries(r).map(o=>{var l;return{value:(l=o[1].salesNum)!=null?l:0,name:o[0]}}):[]),{...Ne}),a=React.useRef(null);return t.jsxs(React.StrictMode,{children:[t.jsx(Ge,{ref:a,timeNeedDay:!0,run:s}),t.jsx(Yt,{data:e,loading:n})]})}var Re=(e=>(e.login="login",e.auth="auth",e.overview="overview",e.SalesVolumeMonitoring="SalesVolumeMonitoring",e.DistributionOfTerminalSales="DistributionOfTerminalSales",e.TerminalActivitySalesStructure="TerminalActivitySalesStructure",e.SalesStructureOfTerminalPriceRanges="SalesStructureOfTerminalPriceRanges",e.TOP10ModelInformation="TOP10ModelInformation",e.QualityOfTerminalSalesInThePanAlliance="QualityOfTerminalSalesInThePanAlliance",e.SalesSituationOfTerminalSubChannels="SalesSituationOfTerminalSubChannel",e.PurchaseQuantityMonitoring="PurchaseQuantityMonitoring",e.OrderQuantityOfMobileTerminals="OrderQuantityOfMobileTerminals",e.InventoryMonitoring="InventoryMonitoring",e.InventoryQuantity="InventoryQuantity",e.InventoryStructure="InventoryStructure",e))(Re||{});const ts=React.lazy(()=>En(()=>import("./index-3b2TtgOi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),Xt=[{path:"",id:"目录",element:t.jsx(Fa,{})},{path:"SalesVolumeMonitoring",id:"终端销量分布",children:[{path:"DistributionOfTerminalSales",id:"终端销量分布",element:t.jsx(React.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(ts,{})})},{path:"TerminalActivitySalesStructure",id:"终端活动销售结构",element:t.jsx(qa,{})},{path:"SalesStructureOfTerminalPriceRanges",id:"终端各价位段销售结构",element:t.jsx(Ga,{})},{path:"TOP10ModelInformation",id:"TOP10机型信息",element:t.jsx(Ja,{})},{path:"SalesSituationOfTerminalSubChannel",id:"终端分渠道销售情况",element:t.jsx(Wa,{})}]},{path:"PurchaseQuantityMonitoring",id:"进货量监控",children:[{path:"OrderQuantityOfMobileTerminals",id:"手机终端订货数量",element:t.jsx(Xa,{})}]},{path:"InventoryMonitoring",id:"库存量监控",children:[{path:"InventoryQuantity",id:"库存TOP10机型",element:t.jsx(Za,{})},{path:"InventoryStructure",id:"分机型价位段结构",element:t.jsx(es,{})}]}],Te=(...e)=>"/".concat(e.join("/"));function ns(){return t.jsxs($n,{children:[t.jsx(me,{path:"login",element:t.jsx(La,{})}),t.jsx(me,{path:"/",element:t.jsx($a,{}),children:Xt.map((e,n)=>{var s,a;return t.jsx(me,{path:(s=e.path)!=null?s:"",element:e.element,children:(a=e.children)==null?void 0:a.map((r,o)=>{var l;return t.jsx(me,{path:(l=r.path)!=null?l:"",element:r.element},o)})},n)})})]})}const as=Redux.combineReducers({SnackBar:fa,AppBarTitle:Yn}),Zt=Redux.legacy_createStore(as,Redux.applyMiddleware(ReduxThunk));Zt.subscribe(()=>{});const ss="_Snackbar_1t4e7_1",rs={Snackbar:ss};function os(){var o;const{open:e,alertText:n,severity:s}=ga(l=>({open:l.SnackBar.open,alertText:l.SnackBar.alertText,severity:l.SnackBar.severity})),a=ReactRedux.useDispatch(),r=(l,u)=>{u!=="clickaway"&&a({type:ve.OPENFALSE})};return t.jsx(React.StrictMode,{children:t.jsx(On,{open:!!(e&&n),autoHideDuration:6e3,onClose:r,message:n,className:(o=rs.Snackbar)!=null?o:"",children:t.jsx(wn,{onClose:r,severity:s,variant:"filled",children:n})})})}const Ne={loadingDelay:300,throttleWait:300};function ls(){return t.jsx(React.StrictMode,{children:t.jsx(ze,{injectFirst:!0,children:t.jsxs(Cn,{children:[t.jsx(An,{}),t.jsx(ReactRedux.Provider,{store:Zt,children:t.jsxs(React.StrictMode,{children:[t.jsx(Bn,{children:t.jsx(ns,{})}),t.jsx(os,{})]})})]})})})}var Nt,It;const{location:G,process:Ae,addEventListener:cs}=(It=(Nt=window!=null?window:self)!=null?Nt:globalThis)!=null?It:void 0;var Ot,wt,Ct;const Je=(Ct=(wt=(Ot=Ae==null?void 0:Ae.env)==null?void 0:Ot.PUBLIC_URL)!=null?wt:"./")==null?void 0:Ct.replace("/",""),Pe=new URL(Je,G==null?void 0:G.href),{serviceWorker:F}=navigator,gt="".concat(Je,"/service-worker.js"),is=e=>{(Pe==null?void 0:Pe.origin)!==(G==null?void 0:G.origin)||!F||Je===void 0||cs("load",()=>{fetch(gt,{headers:{"Service-Worker":"script"}}).then(n=>{var a,r;const s=n.headers.get("Content-Type");n.status===404||s&&s!=="application/javascript"||(r=(a=F==null?void 0:F.register(gt))==null?void 0:a.then(o=>{o.onupdatefound=()=>{const{installing:l}=o;l&&(l.onstatechange=()=>{var u,i;(l==null?void 0:l.state)==="installed"&&(F!=null&&F.controller?(u=e==null?void 0:e.onUpdate)==null||u.call(e,o):(i=e==null?void 0:e.onSuccess)==null||i.call(e,o))})}}))==null||r.catch(o=>{})})})};ReactDOM.render(t.jsx(React.StrictMode,{children:t.jsx(ls,{})}),document.body);is();export{le as M,us as __vite_legacy_guard,ke as g,w as r};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-3b2TtgOi.js","./react-24-O7H2m.js","./object-assign-xLi3eZUp.js","./@remix-run-nSxv3ELK.js","./@mui-ZQF2x56C.js","./@emotion-QRY_AlUX.js","./hoist-non-react-statics-o0ngdJFr.js","./@babel-moqvDIRK.js","./stylis-UTZzoVRx.js","./clsx-2Jv0kmJG.js","./@popperjs-zyV4rJhQ.js","./react-router-AQZaUe--.js","./ahooks-XUeTMw_U.js","./tslib-g6pQwBLH.js","./lodash-JD0k9kaZ.js","./react-router-dom-9FyeBW54.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
